function PesonaEdu3D(x,a,A,L){var m=x;var P=a;var C=1100;var o=1000;var y={x:0,y:0,z:0,s:0};var h={x:0,y:0,z:0};var G={appear:false,angle:0};var E={Ax:0,Ay:0,Az:0};var O=Math.PI/180;var f=Math.sin(O*m);var v=Math.cos(O*m);var s=Math.sin(O*P);var z=Math.cos(O*P);var u=-f;var t=v;var r=-v*z;var q=-f*z;var p=s;var n=-v*s;var l=-f*s;var k=-z;var i=C;var d=C*s*v;var F=C*s*f;var w=C*z;var N=A;var e=L;var K=C;var c=Math.sin(O*N);var B=Math.cos(O*N);var M=Math.sin(O*e);var g=Math.cos(O*e);var H=K*M*B;var J=K*M*c;var I=K*g;var b=new Array([0,0,0],[0,0,0],[0,0,0]);this.Determinant=function(W,U){var V,T,S,R,Q;V=0;for(S=0;S<W;S++){Q=S;T=1;for(R=0;R<W;R++){Q=Q%W;T=T*U[Q][R];Q++}V=V+T}for(S=0;S<W;S++){Q=S;T=1;for(R=0;R<W;R++){if(Q<0){Q=Q+W}T=T*U[Q][R];Q--}V=V-T}return V};this.Get3DPos=function(X,W,V){var ag,af,ad,U,T,S,aa,Z,Y,ai,ah,ae;var R,ac,ab;var Q={x:0,y:0,z:0};ag=u;af=r;ad=n;U=t;T=q;S=l;aa=-X/o;Z=W/o;Y=-1;ai=0;ah=-p*V;ae=-k*V-i;b[0][0]=ag;b[0][1]=U;b[0][2]=aa;b[1][0]=af;b[1][1]=T;b[1][2]=Z;b[2][0]=ad;b[2][1]=S;b[2][2]=Y;R=Determinant(3,b);b[0][0]=ai;b[0][1]=U;b[0][2]=aa;b[1][0]=ah;b[1][1]=T;b[1][2]=Z;b[2][0]=ae;b[2][1]=S;b[2][2]=Y;ac=Determinant(3,b);b[0][0]=ag;b[0][1]=ai;b[0][2]=aa;b[1][0]=af;b[1][1]=ah;b[1][2]=Z;b[2][0]=ad;b[2][1]=ae;b[2][2]=Y;ab=Determinant(3,b);Q.x=ac/R;Q.y=ab/R;Q.z=V;return Q};this.CalcRotateMatrix=function(ac,aa,V,ab){var ad;var Z,S,X,R,U,Q;var T=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]];ad=ac*O;S=Math.cos(ad);Z=Math.sin(ad);ad=aa*O;R=Math.cos(ad);X=Math.sin(ad);ad=V*O;Q=Math.cos(ad);U=Math.sin(ad);for(var Y=0;Y<4;Y++){for(var W=0;W<4;W++){T[Y][W]=ab[Y][W]}}for(var Y=0;Y<4;Y++){ab[Y][0]=T[Y][0]*R*Q+T[Y][1]*(Z*X*Q-S*U)+T[Y][2]*(S*X*Q);ab[Y][1]=T[Y][0]*R*U+T[Y][1]*(Z*X*U+S*Q)+T[Y][2]*(S*X*U-Z*Q);ab[Y][2]=-T[Y][0]*X+T[Y][1]*Z*R+T[Y][2]*S*R}};this.Rotate=function(Y,ad,Z,U){var X,ae,S,R,Q,W,V,T;var ac,ab,aa;ae=ad*O;S=Math.cos(ae);W=Math.sin(ae);ae=Z*O;R=Math.cos(ae);V=Math.sin(ae);ae=U*O;Q=Math.cos(ae);T=Math.sin(ae);for(X=0;X<Y.length;X++){ac=Y[X].x;ab=Y[X].y;aa=Y[X].z;Y[X].y=ab*S+aa*W;Y[X].z=-ab*W+aa*S;ac=Y[X].x;ab=Y[X].y;aa=Y[X].z;Y[X].x=ac*R+aa*V;Y[X].z=-ac*V+aa*R;ac=Y[X].x;ab=Y[X].y;aa=Y[X].z;Y[X].x=ac*Q-ab*T;Y[X].y=ac*T+ab*Q}};this.RotateByMatrix=function(V,W,U){var T;var S,R,Q;for(T=0;T<W.length;T++){S=V[T].x;R=V[T].y;Q=V[T].z;W[T].x=S*U[0][0]+R*U[1][0]+Q*U[2][0];W[T].y=S*U[0][1]+R*U[1][1]+Q*U[2][1];W[T].z=S*U[0][2]+R*U[1][2]+Q*U[2][2]}};this.RotateTo=function(ad,Y,ae,Z,U){var X,af,S,R,Q,W,V,T;var ac,ab,aa;af=ae*O;S=Math.cos(af);W=Math.sin(af);af=Z*O;R=Math.cos(af);V=Math.sin(af);af=U*O;Q=Math.cos(af);T=Math.sin(af);for(X=0;X<Y.length;X++){Y[X].x=ad[X].x;Y[X].y=ad[X].y;Y[X].z=ad[X].z;ac=Y[X].x;ab=Y[X].y;aa=Y[X].z;Y[X].y=ab*S+aa*W;Y[X].z=-ab*W+aa*S;ac=Y[X].x;ab=Y[X].y;aa=Y[X].z;Y[X].x=ac*R+aa*V;Y[X].z=-ac*V+aa*R;ac=Y[X].x;ab=Y[X].y;aa=Y[X].z;Y[X].x=ac*Q-ab*T;Y[X].y=ac*T+ab*Q}};this.RotatePointTo=function(ad,Y,ae,Z,U){var X,af,S,R,Q,W,V,T;var ac,ab,aa;af=ae*O;S=Math.cos(af);W=Math.sin(af);af=Z*O;R=Math.cos(af);V=Math.sin(af);af=U*O;Q=Math.cos(af);T=Math.sin(af);Y.x=ad.x;Y.y=ad.y;Y.z=ad.z;ac=Y.x;ab=Y.y;aa=Y.z;Y.y=ab*S+aa*W;Y.z=-ab*W+aa*S;ac=Y.x;ab=Y.y;aa=Y.z;Y.x=ac*R+aa*V;Y.z=-ac*V+aa*R;ac=Y.x;ab=Y.y;aa=Y.z;Y.x=ac*Q-ab*T;Y.y=ac*T+ab*Q};this.RotateToPlusZ=function(ad,Y,ae,Z,U,af){var X,ag,S,R,Q,W,V,T;var ac,ab,aa;ag=ae*O;S=Math.cos(ag);W=Math.sin(ag);ag=Z*O;R=Math.cos(ag);V=Math.sin(ag);ag=U*O;Q=Math.cos(ag);T=Math.sin(ag);for(X=0;X<Y.length;X++){Y[X].x=ad[X].x;Y[X].y=ad[X].y;Y[X].z=ad[X].z+af;ac=Y[X].x;ab=Y[X].y;aa=Y[X].z;Y[X].y=ab*S+aa*W;Y[X].z=-ab*W+aa*S;ac=Y[X].x;ab=Y[X].y;aa=Y[X].z;Y[X].x=ac*R+aa*V;Y[X].z=-ac*V+aa*R;ac=Y[X].x;ab=Y[X].y;aa=Y[X].z;Y[X].x=ac*Q-ab*T;Y[X].y=ac*T+ab*Q}};this.Moves=function(T,R,Q,U){var S;for(S=0;S<T.length;S++){T[S].x=T[S].x+R;T[S].y=T[S].y+Q;T[S].z=T[S].z+U}};this.MovesTo=function(T,U,R,Q,V){var S;for(S=0;S<U.length;S++){U[S].x=T[S].x+R;U[S].y=T[S].y+Q;U[S].z=T[S].z+V}};this.RotateAndMoveTo=function(ai,ad,W,ab,ae,ah,ag,af){var ac,V,S,R,Q,aa,Z,Y;var X,U,T;V=W*O;S=Math.cos(V);aa=Math.sin(V);V=ab*O;R=Math.cos(V);Z=Math.sin(V);V=ae*O;Q=Math.cos(V);Y=Math.sin(V);for(ac=0;ac<ad.length;ac++){ad[ac].x=ai[ac].x;ad[ac].y=ai[ac].y;ad[ac].z=ai[ac].z;X=ad[ac].x;U=ad[ac].y;T=ad[ac].z;ad[ac].y=U*S+T*aa;ad[ac].z=-U*aa+T*S;X=ad[ac].x;U=ad[ac].y;T=ad[ac].z;ad[ac].x=X*R+T*Z;ad[ac].z=-X*Z+T*R;X=ad[ac].x;U=ad[ac].y;T=ad[ac].z;ad[ac].x=X*Q-U*Y;ad[ac].y=X*Y+U*Q;ad[ac].x=ad[ac].x+ah;ad[ac].y=ad[ac].y+ag;ad[ac].z=ad[ac].z+af}};this.RotateZAndMoveTo=function(Y,X,T,W,U,S){var V,Z,Q,R;Z=T*O;Q=Math.cos(Z);R=Math.sin(Z);for(V=0;V<X.length;V++){X[V].x=Y[V].x*Q-Y[V].y*R+W;X[V].y=Y[V].x*R+Y[V].y*Q+U;X[V].z=Y[V].z+S}};this.ColorDeep=function(R,Q){cl=R;wb=Math.floor((cl&255)*Q);cl>>=8;wg=Math.floor((cl&255)*Q);cl>>=8;wr=Math.floor((cl&255)*Q);return wr*65536+wg*256+wb};this.Convert=function(Q,W,U){var S,T,V,R;S=u*Q+t*W;T=r*Q+q*W+p*U;V=n*Q+l*W+k*U+i;R=o/V;return{x:R*S,y:-R*T,z:V,s:R}};this.GetScale=function(Q,S,R){return o/(n*Q+l*S+k*R+i)};this.Initial=function(Q,R){m=Q;P=R;f=Math.sin(O*m);v=Math.cos(O*m);s=Math.sin(O*P);z=Math.cos(O*P);u=-f;t=v;r=-v*z;q=-f*z;p=s;n=-v*s;l=-f*s;k=-z;i=C;d=C*s*v;F=C*s*f;w=C*z};this.InitialCahaya=function(R,Q){N=R;e=Q;K=C;c=Math.sin(O*N);B=Math.cos(O*N);M=Math.sin(O*e);g=Math.cos(O*e);H=K*M*B;J=K*M*c;I=K*g};this.Visible=function(aa,Z,Y){var ai={appear:false,angle:0};var U=aa[1]-aa[0];var S=aa[2]-aa[0];var ag=Z[1]-Z[0];var ae=Z[2]-Z[0];var T=Y[1]-Y[0];var Q=Y[2]-Y[0];if(U==0&&ag==0&&T==0){U=aa[2]-aa[1];S=aa[3]-aa[1];ag=Z[2]-Z[1];ae=Z[3]-Z[1];T=Y[2]-Y[1];Q=Y[3]-Y[1]}var W=ag*Q-ae*T;var ah=T*S-Q*U;var af=U*ae-S*ag;var R=d-aa[0];var X=F-Z[0];var ab=w-Y[0];var ad=W*R+ah*X+af*ab;ai.appear=(ad>0);R=H-aa[0];X=J-Z[0];ab=I-Y[0];ad=W*R+ah*X+af*ab;var V=Math.sqrt(W*W+ah*ah+af*af);var ac=Math.sqrt(R*R+X*X+ab*ab);ai.angle=Math.acos(ad/(V*ac))/O;if(!ai.appear){ai.angle=180-ai.angle}return ai};this.Visible2=function(ab){var Z={appear:false,angle:0};var ad=ab[1].x-ab[0].x;var ac=ab[2].x-ab[0].x;var aa=ab[1].y-ab[0].y;var Y=ab[2].y-ab[0].y;var V=ab[1].z-ab[0].z;var T=ab[2].z-ab[0].z;if(ad==0&&aa==0&&V==0){ad=ab[2].x-ab[1].x;ac=ab[3].x-ab[1].x;aa=ab[2].y-ab[1].y;Y=ab[3].y-ab[1].y;V=ab[2].z-ab[1].z;T=ab[3].z-ab[1].z}var S=aa*T-Y*V;var ag=V*ac-T*ad;var U=ad*Y-ac*aa;var ae=d-ab[0].x;var Q=F-ab[0].y;var W=w-ab[0].z;var X=S*ae+ag*Q+U*W;Z.appear=(X>0);ae=H-ab[0].x;Q=J-ab[0].y;W=I-ab[0].z;X=S*ae+ag*Q+U*W;var R=Math.sqrt(S*S+ag*ag+U*U);var af=Math.sqrt(ae*ae+Q*Q+W*W);Z.angle=Math.acos(X/(R*af))/O;if(!Z.appear){Z.angle=180-Z.angle}return Z};this.NormalAngle=function(Q,U,T){var S={Ax:0,Ay:0,Az:0};Xvector1=Q[1]-Q[0];Xvector2=Q[2]-Q[0];Yvector1=U[1]-U[0];Yvector2=U[2]-U[0];Zvector1=T[1]-T[0];Zvector2=T[2]-T[0];if(Xvector1==0&&Yvector1==0&&Zvector1==0){Xvector1=Q[2]-Q[1];Xvector2=Q[3]-Q[1];Yvector1=U[2]-U[1];Yvector2=U[3]-U[1];Zvector1=T[2]-T[1];Zvector2=T[3]-T[1]}Xnormal=Yvector1*Zvector2-Yvector2*Zvector1;Ynormal=Zvector1*Xvector2-Zvector2*Xvector1;Znormal=Xvector1*Yvector2-Xvector2*Yvector1;var R=Math.sqrt(Xnormal*Xnormal+Ynormal*Ynormal+Znormal*Znormal);S.Ax=Math.acos(Xnormal/R);S.Ay=Math.acos(Ynormal/R);S.Az=Math.acos(Znormal/R);return S};this.NormalUnit=function(Q,U,T){var S={Ax:0,Ay:0,Az:0};Xvector1=Q[1]-Q[0];Xvector2=Q[2]-Q[0];Yvector1=U[1]-U[0];Yvector2=U[2]-U[0];Zvector1=T[1]-T[0];Zvector2=T[2]-T[0];if(Xvector1==0&&Yvector1==0&&Zvector1==0){Xvector1=Q[2]-Q[1];Xvector2=Q[3]-Q[1];Yvector1=U[2]-U[1];Yvector2=U[3]-U[1];Zvector1=T[2]-T[1];Zvector2=T[3]-T[1]}Xnormal=Yvector1*Zvector2-Yvector2*Zvector1;Ynormal=Zvector1*Xvector2-Zvector2*Xvector1;Znormal=Xvector1*Yvector2-Xvector2*Yvector1;var R=Math.sqrt(Xnormal*Xnormal+Ynormal*Ynormal+Znormal*Znormal);S.Ax=Xnormal/R;S.Ay=Ynormal/R;S.Az=Znormal/R;return S};this.isPointVisible=function(T,S){var R=d-T.x;var Q=F-T.y;var V=w-T.z;var U=S.Ax*R+S.Ay*Q+S.Az*V;return(U>0)};function D(R,Q){return R.depth-Q.depth;return R.depth-Q.depth}this.sortVertices=function(S){var R=new Array();for(var Q=0;Q<S.length;Q++){R.push({index:Q,depth:this.Convert(S[Q].x,S[Q].y,S[Q].z).s})}R.sort(D);return R};this.sortVerticesPos=function(S){var R=new Array();for(var Q=0;Q<S.length;Q++){R.push({index:Q,depth:this.Convert(S[Q].pos.x,S[Q].pos.y,S[Q].pos.z).s})}R.sort(D);return R};this.SortObject=function(U){var S=0;var Z=0;var W=0;var Y,X,Q;var R=new Array();var T=U.getSisi();for(var aa=0;aa<T.length;aa++){Y=T[aa];Q=Y.titik.length;S=0;Z=0;W=0;for(var V=0;V<Q;V++){X=Y.titik[V];S+=X.x;Z+=X.y;W+=X.z}S/=Q;Z/=Q;W/=Q;R.push({index:aa,depth:this.Convert(S,Z,W).s})}R.sort(D);return R};this.Sort=function(T,Y){var S=0;var ab=0;var W=0;var Z,X,R,aa;var Q=new Array();for(var V=0;V<T.length;V++){switch(T[V].name){case"polygon":R=T[V].n;S=0;ab=0;W=0;for(var U=0;U<R;U++){aa=T[V].vIndex[U];S+=Y[aa].x;ab+=Y[aa].y;W+=Y[aa].z}S/=R;ab/=R;W/=R;Q.push({index:V,depth:this.Convert(S,ab,W).s});break;case"label":aa=T[V].vIndex;Q.push({index:V,depth:this.Convert(Y[aa].x,Y[aa].y,Y[aa].z).s});break;case"line":aa=T[V].vIndex[0];S=Y[aa].x;ab=Y[aa].y;W=Y[aa].z;aa=T[V].vIndex[1];S+=Y[aa].x;ab+=Y[aa].y;W+=Y[aa].z;S/=2;ab/=2;W/=2;Q.push({index:V,depth:this.Convert(S,ab,W).s});break}}Q.sort(D);return Q};this.CollectVertices=function(S,Q,R){var U;for(var T=0;T<S.length;T++){switch(S[T].name){case"polygon":S[T].vIndex=new Array();for(j=0;j<S[T].n;j++){Q.push({x:S[T].x[j],y:S[T].y[j],z:S[T].z[j]});U=R.push({x:S[T].x[j],y:S[T].y[j],z:S[T].z[j]});S[T].vIndex.push(U-1)}break;case"label":Q.push({x:S[T].x,y:S[T].y,z:S[T].z});U=R.push({x:S[T].x,y:S[T].y,z:S[T].z});S[T].vIndex=U-1;break;case"line":S[T].vIndex=new Array();for(j=0;j<2;j++){Q.push({x:S[T].x[j],y:S[T].y[j],z:S[T].z[j]});U=R.push({x:S[T].x[j],y:S[T].y[j],z:S[T].z[j]});S[T].vIndex.push(U-1)}break}}};this.distanceBetween=function(R,U){var T=U.x-R.x;var S=U.y-R.y;var Q=U.z-R.z;return Math.sqrt(T*T+S*S+Q*Q)};this.vectorBetween=function(R,V){var T=V.x-R.x;var S=V.y-R.y;var Q=V.z-R.z;var U=Math.sqrt(T*T+S*S+Q*Q);return{Ax:T/U,Ay:S/U,Az:Q/U}}};