function Molecule3D(){var bw;var T;var ag=new Array({name:"PE3D_min.js"},{name:"AdaptiveFontSize_min.js"});var aq=ag.length;var aD;var an=new Array();var aM=an.length;var N=new Array(aM);var cf="en";var m;this.setLanguage=function(cp){cf=cp};var a2=false;this.resetStorage=function(cp){a2=cp};var b0=true;this.showLoading=function(cp){b0=cp};var bg=true;this.setGradasiBola=function(cp){bg=cp};var bw;var T;this.start=function(cr,cq){bw=cr;T=cq;switch(cf){case"id":m={title:"Geometri Molekul Berdasarkan Teori VSEPR",loadingLibrary:"Sebentar... sedang memuat library ",loadingImage:"Sebentar... sedang memuat gambar/audio ",domainPE:"Domain pasangan elektron (PE):",domainPEB:"Domain pasangan elektron bebas (PEB):",domainPEI:"Domain pasangan elektron terikat (PEI):",geomElektron:"Geometri domain elektron:",geomMolekul:"Geometri molekul:",linear:"Linier|(Linear)",trigonalPlanar:"Segitiga datar|(Trigonal-planar)",bent:"Bengkok|(Bent)",tetrahedral:"Tetrahedral|(Tetrahedral)",trigonalPyramidal:"Piramida segitiga|(Trigonal-pyramidal)",bipyramidal:"Bipiramida|(Bipyramidal)",trigonalBipyramidal:"Bipiramida segitiga|(Trigonal-bipyramidal)",seesaw:"Jungkat-jungkit|(Seesaw)",tShaped:"Bentuk T|(T-shaped)",octahedral:"Oktahedral|(Octahedral)",squarePyramidal:"Piramida segiempat|(Square-pyramidal)",squarePlanar:"Segiempat datar|(Square-planar)",kecuali:"(Secara teori ada, tetapi secara praktik jarang/tidak stabil.)"};break;case"en":default:m={title:"Molecular Geometry Based on VSEPR Theory",loadingLibrary:"A moment... loading library ",loadingImage:"A moment... loading image/audio ",domainPE:"Electron pair domain:",domainPEB:"Lone pair domain:",domainPEI:"Bonden pair domain:",geomElektron:"Electron domain geometry:",geomMolekul:"Molecular geometry:",linear:"Linear",trigonalPlanar:"Trigonal-planar",bent:"Bent",tetrahedral:"Tetrahedral",trigonalPyramidal:"Trigonal-pyramidal",bipyramidal:"Bipyramidal",trigonalBipyramidal:"Trigonal-bipyramidal",seesaw:"Seesaw",tShaped:"T-shaped",octahedral:"Octahedral",squarePyramidal:"Square-pyramidal",squarePlanar:"Square-planar",kecuali:"(Theoretically possible, but rarely stable in practice.)"};break;case"zh":case"zh-cn":case"zh-sg":m={title:"VSEPR 分子的几何结构",loadingLibrary:"稍等... 函式库装载中 ",loadingImage:"稍等... 图桉档装载中 ",domainPE:"原子总电子对数目:",domainPEB:"未键结电子对数目:",domainPEI:"键结电子对数目:",geomElektron:"电子排列:",geomMolekul:"分子几何结构:",linear:"直线型|(Linear)",trigonalPlanar:"平面三角型|(Trigonal-planar)",bent:"角型|(Bent)",tetrahedral:"四面体|(Tetrahedral)",trigonalPyramidal:"三角锥|(Trigonal-pyramidal)",bipyramidal:"双角锥|(Bipyramidal)",trigonalBipyramidal:"双三角锥|(Trigonal-bipyramidal)",seesaw:"跷跷板形|(Seesaw)",tShaped:"T 字型|(T-shaped)",octahedral:"八面体|(Octahedral)",squarePyramidal:"四角锥|(Square-pyramidal)",squarePlanar:"平面四方型|(Square-planar)"};break;case"zh-tw":case"zh-hk":m={title:"VSEPR 分子的幾何結構",loadingLibrary:"稍等... 函式庫裝載中 ",loadingImage:"稍等... 圖案檔裝載中 ",domainPE:"原子總電子對數目:",domainPEB:"未鍵結電子對數目:",domainPEI:"鍵結電子對數目:",geomElektron:"電子排列:",geomMolekul:"分子幾何結構:",linear:"直線型|(Linear)",trigonalPlanar:"平面三角型|(Trigonal-planar)",bent:"角型|(Bent)",tetrahedral:"四面體|(Tetrahedral)",trigonalPyramidal:"三角錐",bipyramidal:"雙角錐|(Bipyramidal)",trigonalBipyramidal:"雙三角錐|(Trigonal-bipyramidal)",seesaw:"蹺蹺板形|(Seesaw)",tShaped:"T 字型|(T-shaped)",octahedral:"八面體|(Octahedral)",squarePyramidal:"四角錐",squarePlanar:"平面四方型"};break}if(b0){b3()}if(ag.length==0){bm()}else{for(var cp=0;cp<ag.length;cp++){cm(m.loadingLibrary+(cp+1)+"/"+ag.length);bR(ag[cp].name)}}};function bR(cp){var cr=document.createElement("script");cr.type="text/javascript";cr.src=cp;cr.onreadystatechange=Q;cr.onload=Q;var cq=document.getElementsByTagName("head").item(0);cq.appendChild(cr)}function Q(){aq--;if(aq==0){bm()}}var az;var a5;function b3(){var cp=document.createElement("style");cp.type="text/css";cp.innerHTML=".modalDialog { position: fixed; font-family: Arial, Helvetica, sans-serif; top: 0; right: 0; bottom: 0; left: 0; z-index: 99999; opacity:1; -webkit-transition: opacity 400ms ease-in; -moz-transition: opacity 400ms ease-in; transition: opacity 400ms ease-in;} .modalDialog > div { display: table; color:#000000;  width: 60vmin; height: 12vmin; position: absolute; top:0;  bottom:0; left:0; right:0; margin:auto; padding: 0px 2vmin 0px 2vmin; border-radius: 2vmin; border:2px solid #303030; background: #ffffff; text-align:center; box-shadow: 0.3vmin 0.3vmin 0.3vmin rgba(0,0,0,0.5);}";document.body.appendChild(cp);az=document.createElement("div");az.id="openModal";az.className="modalDialog";var cq=document.createElement("div");az.appendChild(cq);a5=document.createElement("p");a5.style.fontSize="2.5vmin";a5.style.display="table-cell";a5.style.verticalAlign="middle";a5.textContent="?";cq.appendChild(a5);document.body.appendChild(az)}function cm(cp){if(typeof a5=="object"){a5.textContent=cp}}function S(){if(az){document.body.removeChild(az)}}var bY="AE_????????????????";const aK=Math.PI/2;const W=3*Math.PI/2;const br=900;const aL=768;var b4;var a9;var bb=1;var bS=1;var w,r;var bC;var cn,bj;var s,ce;var bi,bz;var bU=340;var aA=340;var U=340;var C=340;var ab=142;var ba=true;function bm(){container=document.getElementById(bw);w=document.createElement("canvas");w.unselectable="on";w.style.zIndex="0";container.appendChild(w);r=w.getContext("2d");w.style.backgroundColor="#000000";s=document.createElement("canvas");s.unselectable="on";s.style.pointerEvents="none";s.style.zIndex="1";container.appendChild(s);ce=s.getContext("2d");bi=document.createElement("canvas");bi.unselectable="on";bi.style.pointerEvents="none";bi.style.zIndex="2";container.appendChild(bi);bz=bi.getContext("2d");bC=document.createElement("canvas");bC.unselectable="on";bC.style.pointerEvents="none";bC.width=bU;bC.height=aA;buffContext=bC.getContext("2d");cn=document.createElement("canvas");cn.unselectable="on";cn.style.pointerEvents="none";cn.width=U;cn.height=C;bj=cn.getContext("2d");canvasList=[{canvas:w,x:0,y:0,width:br,height:aL},{canvas:s,x:0,y:aL-ab,width:br,height:ab},{canvas:bi,x:0,y:aL-ab,width:br,height:ab}];F(canvasList);if(aM==0){a0()}else{aD=aM;for(var cp=0;cp<aM;cp++){cm(m.loadingImage+(cp+1)+"/"+aM);switch(an[cp].type){case"image":N[an[cp].index]=new Image();N[an[cp].index].addEventListener("load",aG,false);N[an[cp].index].src="images/"+an[cp].name;break;case"audio":N[an[cp].index]=new Audio();N[an[cp].index].addEventListener("loadeddata",aG,false);N[an[cp].index].src="audios/"+an[cp].name;N[an[cp].index].type="audio/mpeg";break}}}}function aG(){aD--;if(aD==0){a0()}}var ck=0;var O=0;var aE=0;var k=false;var cb=false;var aH=2;var aa=0;var f=br/2;var c=aL/2+20;const B=Math.PI/180;function a0(){S();ba=false;try{var cp=r.globalCompositeOperation;r.globalCompositeOperation="screen";ba=(r.globalCompositeOperation=="screen");r.globalCompositeOperation=cp}catch(cq){}window.addEventListener("resize",bX,false);container.addEventListener("touchstart",I,false);w.addEventListener("mousedown",aY,true);w.addEventListener("touchstart",bO,true);aJ();t();ca();am(aH,aa);ak();e();bp();ap(aH,aa);k=true;bB()}function bs(cp){}function I(cq){if(!cq){var cq=window.event}var cs=cq.targetTouches[0];var cp=(cs.pageX-b4.x)/bb;var cr=(cs.pageY-b4.y)/bS;if(cp>=0&&cp<br&&cr>=0&&cr<aL){cq.preventDefault();cq.stopPropagation()}}function b5(cp,cr){try{if(typeof(Storage)!=="undefined"){localStorage.setItem(cp,cr)}}catch(cq){}}window.requestAnimFrame=(function(cp){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(cq){window.setTimeout(cq,1000/60)}})();window.cancelRequestAnimFrame=(function(){return window.cancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||clearTimeout})();var aj=0;var g;function bB(){if(k){aZ()}if(!cb&&!(b9||bM)&&(ck!=0||O!=0||aE!=0)){sxRot=ck;syRot=O;szRot=aE;ck=0;O=0;aE=0;var cr=Math.max(sxRot,syRot,szRot);var cs=Math.abs(Math.min(sxRot,syRot,szRot));tMax=Math.min(1500,1000*(cs>cr?cs:cr));aj=new Date().getTime();cb=true}if(cb){var cp=new Date().getTime()-aj;if(cp>tMax){ck=0;O=0;aE=0;cb=false}else{var cq=Math.sin(aK*cp/tMax);ck=sxRot-cq*sxRot;O=syRot-cq*syRot;aE=szRot-cq*szRot;aZ()}}ck=ac(ck);O=ac(O);aE=ac(aE);g=requestAnimFrame(bB)}function ac(cp){cp=cp/2;if(Math.abs(cp)<0.0001){cp=0}return cp}function ak(){var cp=r;var cq=40;cp.beginPath();cp.rect(0,0,br,cq);cp.fillStyle="#404040";cp.fill();cp.font=AdaptiveFontSize.fix("18pt serif");cp.textBaseline="middle";cp.textAlign="center";cp.fillStyle="#ffffff";cp.fillText(m.title,br/2,cq/2)}function ap(cp,cs){var cr=r;var cv=aL-215;var cu=30;cr.clearRect(0,cv-6,br,cu+60);const cq="₀₁₂₃₄₅₆₇₈₉";PEI=cp-cs;var ct;if(cs==0){ct="AX"+cq[PEI]}else{ct="AX"+cq[PEI]+"E"+cq[cs]}cr.font=AdaptiveFontSize.fix("26pt serif");cr.textBaseline="middle";cr.textAlign="center";cr.fillStyle="#ffffff";cr.fillText(ct,br/2,cv+cu/2+25);if(aw){cr.font=AdaptiveFontSize.fix("12pt sans-serif");cr.textBaseline="top";cr.textAlign="center";cr.fillStyle="#ffdd00";cr.fillText(m.kecuali,br/2,cv)}}var b7;var aP;function e(){var cp=r;var cq=br/2;var cy=65;var cw=35;var ct=35;cp.clearRect(0,cy-4,br,ct*3+20);b7=new Array();aP=new Array();var cr=aH-2;var cx;var cv,cu;cu=cy;cp.font=AdaptiveFontSize.fix("16pt serif");cp.textBaseline="middle";cp.textAlign="center";for(var cs=0;cs<5;cs++){cv=cq+cw*cs;cp.beginPath();if(cs==cr){cp.rect(cv,cu,cw-1,ct);cp.moveTo(cv,cu);cp.lineTo(cv+cw-1,cu);cp.lineTo(cv+cw-1,cu+ct);cp.lineTo(cv+cw/2,cu+ct+8);cp.lineTo(cv,cu+ct);cp.closePath();cp.fillStyle="#ffb000"}else{cp.rect(cv,cu,cw-1,ct);cp.fillStyle="#606060"}cp.fill();cp.fillStyle=(cs==cr)?"#000000":"#a0a0a0";cp.fillText(cs+2,cv+cw/2,cu+ct/2);b7.push({x1:cv,y1:cu,x2:cv+cw,y2:cu+ct,peb:au[cs].length})}cu=cy+ct+13;var cz=(cr+0.5)*cw-cw*au[cr].length/2;for(var cs=0;cs<au[cr].length;cs++){cx=au[cr][cs].PEB;cv=cq+cw*cs+cz;if(cx==(aa)){cp.beginPath();cp.rect(cv,cu,cw-1,ct+1);cp.fillStyle="#5080a0";cp.fill();cp.beginPath();cp.rect(cv,cu+ct,cw-1,ct);cp.fillStyle="#c0c0c0";cp.fill()}else{cp.beginPath();cp.rect(cv,cu,cw-1,2*ct);cp.fillStyle="#606060";cp.fill()}cp.fillStyle=(cx==(aa))?"#000000":"#a0a0a0";cp.fillText(cx,cv+cw/2,cu+ct/2);cp.fillText(aH-cx,cv+cw/2,cu+ct+ct/2);aP.push({x1:cv,y1:cu,x2:cv+cw,y2:cu+2*ct,peb:cx})}var cu=cy+ct/2;cp.font=AdaptiveFontSize.fix("16pt serif");cp.textBaseline="middle";cp.textAlign="right";cp.fillStyle="#b0b0b0";cp.fillText(m.domainPE,cq-20,cu);cu=cy+ct/2+ct+13;cp.fillText(m.domainPEB,cq-20+cz,cu);cu+=ct;cp.fillText(m.domainPEI,cq-20+cz,cu)}var ad=new Array();function bH(cr,cp,cu,cs,cq,ct){cr.clearRect(cp-12,cu-12,24,24);if(cs){cr.lineWidth=2;cr.strokeStyle="#ffffff";cr.beginPath();cr.moveTo(cp-10+4,cu-1);cr.lineTo(cp-10+8,cu+5);cr.lineTo(cp-10+16,cu-6);cr.stroke()}cr.beginPath();cr.rect(cp-10,cu-10,20,20);cr.fillStyle="rgba(255,200,0,0.8)";if(cs){cr.fill()}cr.lineWidth=1.5;cr.strokeStyle="#ffffff";cr.stroke();ad[cq]={x1:cp-10,y1:cu-10,x2:cp+10+ct,y2:cu+10,value:cs}}function bp(){var cr=ce;var ct=20;var cp;cr.clearRect(0,0,br,ab);cr.textBaseline="middle";cr.textAlign="left";y=ct;cr.font=AdaptiveFontSize.fix("16pt serif");cp=cr.measureText(m.geomElektron).width;cr.fillStyle="#b0b0b0";xs=br/4-cp/2;x=xs;cr.fillText(m.geomElektron,x,y);x-=20;bH(cr,x,y,o,0,cp+10);if(o){cr.textBaseline="alphabetic";cr.textAlign="left";var cv=bT.split("|");x+=75;y+=38;cr.font=AdaptiveFontSize.fix("16pt serif");cr.fillStyle="#77aaff";cr.fillText(cv[0],x,y);if(cv.length>1){y+=22;cr.font=AdaptiveFontSize.fix("14pt serif");cr.fillStyle="#5588dd";cr.fillText(cv[1],x,y)}geomelectPosY=y+60}cj=xs;ch=ct+56;cr.textBaseline="middle";cr.textAlign="left";y=ct;cr.font=AdaptiveFontSize.fix("16pt serif");cp=cr.measureText(m.geomMolekul).width;cr.fillStyle="#b0b0b0";xs=2.5*br/4-cp/2;x=xs;cr.fillText(m.geomMolekul,x,y);x-=20;bH(cr,x,y,n,1,cp+10);if(n){cr.textBaseline="alphabetic";cr.textAlign="left";var cv=bP.split("|");x+=75;y+=38;cr.font=AdaptiveFontSize.fix("16pt serif");cr.fillStyle="#77aaff";cr.fillText(cv[0],x,y);if(cv.length>1){y+=22;cr.font=AdaptiveFontSize.fix("14pt serif");cr.fillStyle="#5588dd";cr.fillText(cv[1],x,y)}}geomMolPosX=xs;bq=ct+56;xs=br-130;x=xs;y=ct;bH(cr,x,y,cc,2,40);x+=33;y+=13;cr.beginPath();cr.moveTo(x-4,y);cr.bezierCurveTo(x-25,y-34,x+25,y-34,x+4,y);cr.closePath();cr.fillStyle="#202020";cr.fill();cr.beginPath();cr.moveTo(x-4,y);cr.bezierCurveTo(x-25,y-34,x+25,y-34,x+4,y);cr.lineWidth=1.5;cr.strokeStyle="#b0b0b0";cr.stroke();cr.beginPath();cr.arc(x-3,y-17,2,0,2*Math.PI,false);cr.arc(x+3,y-17,2,0,2*Math.PI,false);cr.fillStyle="#b0b0b0";cr.fill();xs=br-130;x=xs;y=ct+40;bH(cr,x,y,aS,3,40);var cs=25*B;x+=22;cr.beginPath();cr.moveTo(x,y);cr.arc(x,y,20,-cs,cs,false);cr.fillStyle="#202020";cr.fill();cr.beginPath();cr.arc(x,y,20,-cs,cs,false);cr.lineWidth=1;cr.strokeStyle="#b0b0b0";cr.stroke();var cq=Math.sin(cs);var cu=Math.cos(cs);cr.beginPath();cr.moveTo(x,y);cr.lineTo(x+28*cu,y-28*cq);cr.moveTo(x,y);cr.lineTo(x+28*cu,y+28*cq);cr.lineWidth=1.5;cr.strokeStyle="#b0b0b0";cr.stroke();if(ba){xs=br-130;x=xs;y=ct+80;bH(cr,x,y,at,4,40);x+=20;bt(cr,x,y-5,12,10,3);cr.fillStyle="#bb0000";cr.fill();bt(cr,x+17,y-5,12,10,3);cr.fillStyle="#005588";cr.fill()}}function bt(cs,cr,cu,ct,cq,cp){cs.beginPath();cs.moveTo(cr+cp,cu);cs.lineTo(cr+ct-cp,cu);cs.arcTo(cr+ct,cu,cr+ct,cu+cp,cp);cs.lineTo(cr+ct,cu+cq-cp);cs.arcTo(cr+ct,cu+cq,cr+ct-cp,cu+cq,cp);cs.lineTo(cr+cp,cu+cq);cs.arcTo(cr,cu+cq,cr,cu+cq-cp,cp);cs.lineTo(cr,cu+cp);cs.arcTo(cr,cu,cr+cp,cu,cp);cs.closePath()}var o=true;var n=true;var cc=true;var aS=false;var at=false;var cj,bf,ch,bq;function aZ(){be.CalcRotateMatrix(ck,O,aE,P);converter3D_BC1.CalcRotateMatrix(ck,O,aE,P);aW.CalcRotateMatrix(ck,O,aE,P);if(at){bF(converter3D_BC1,r,f,c-30,1);bF(aW,buffContext,bU/2,aA/2,2);r.globalCompositeOperation="screen";r.drawImage(bC,0,0,bU,aA,f-bU/2,c-30-aA/2,bU,aA);r.globalCompositeOperation="source-over"}else{bF(be,r,f,c-30,0)}b1(be,bz,cj,ch);J(be,bz,geomMolPosX,bq);k=false}function aB(){ak();e();bp();ap(aH,aa);k=true}function bQ(cs,cC,cA,cp,cv){cs.beginPath();cs.arc(cC,cA,Math.round(cp),0,2*Math.PI,false);if(bg){var cy="rgb("+cv.r+","+cv.g+","+cv.b+")";var cx="rgb("+Math.round(0.5*cv.r)+","+Math.round(0.5*cv.g)+","+Math.round(0.5*cv.b)+")";var cw="rgb("+Math.round(0.45*cv.r)+","+Math.round(0.45*cv.g)+","+Math.round(0.45*cv.b)+")";var cr=Math.round(cC-0.45*cp);var cB=Math.round(cA-0.45*cp);var cu=Math.round(0.2*cp);var cq=Math.round(cC-0.2*cp);var cz=Math.round(cA-0.2*cp);var ct=Math.round(cp);var cD=cs.createRadialGradient(cr,cB,cu,cq,cz,ct);cD.addColorStop(0,cy);cD.addColorStop(0.9,cx);cD.addColorStop(1,cw);cs.fillStyle=cD}else{cs.fillStyle="rgb("+cv.r+","+cv.g+","+cv.b+")"}cs.fill()}function bI(cr,cp,ct,cs,cq){cr.beginPath();cr.arc(cp,ct,cs,0,2*Math.PI,false);cr.fillStyle=cq;cr.fill()}var be,aW;var P=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];function aJ(){be=new PesonaEdu3D(30,70,190,120);converter3D_BC1=new PesonaEdu3D(30-2,70,190,120);aW=new PesonaEdu3D(30+2,70,190,120)}var K;var Y=40;var bV=140;var by=0.4*bV;var bx=bV-by;var ax=16;var bn=16;var aQ=48;var aI=40;var A=0.57*bV;var cg=60*B;var bv=Math.PI/2;var cd=109.5*B;var bK=120*B;var al=Math.PI;var D=240*Math.PI;var i;var au;var bu;var R;var Z,G;var bG,cl;var b8,u;var bE,b2;var b6,b;var aN;var aU,j;var a1,M;var a4,v;var bN;var ae,bJ;const a3={PUSAT:0,TERIKAT:1,BEBAS:2,BINGKAI:3,STICK:4,APIT:5};var V={r:255,g:0,b:100};var a7={r:255,g:255,b:255};var av={r:50,g:150,b:200};var L={r:255,g:200,b:0};var ay={r:255,g:255,b:255};var aO;var H;var bc;var ci;var bd;var bo=40;var bk;var E;function t(){bk=new Array();bk[0]={sides:[]};bk[1]={sides:[[1,2,3],[3,2,1]]};bk[2]={sides:[[1,2,3],[1,3,4],[1,4,2],[2,4,3]]};bk[3]={sides:[[1,2,3],[1,3,4],[1,4,2],[2,5,3],[3,5,4],[2,4,5]]};bk[4]={sides:[[1,2,3],[1,3,4],[1,4,5],[1,5,2],[2,6,3],[3,6,4],[4,6,5],[2,5,6]]};var cp;E=new Array();E.push(null);cp=E.push(new Array())-1;E[cp].push({sides:[[1,2,3],[3,2,1]]});E[cp].push(null);cp=E.push(new Array())-1;E[cp].push({sides:[[1,2,3],[1,3,4],[1,4,2],[2,4,3]]});E[cp].push({sides:[[0,2,3],[0,3,4],[0,4,2],[2,4,3]]});E[cp].push(null);cp=E.push(new Array())-1;E[cp].push({sides:[[1,2,3],[1,3,4],[1,4,2],[2,5,3],[3,5,4],[2,4,5]]});E[cp].push(null);E[cp].push(null);E[cp].push(null);cp=E.push(new Array())-1;E[cp].push({sides:[[1,2,3],[1,3,4],[1,4,5],[1,5,2],[2,6,3],[3,6,4],[4,6,5],[2,5,6]]});E[cp].push({sides:[[2,6,3],[3,6,4],[4,6,5],[2,5,6],[2,3,4,5]]});E[cp].push({sides:[[2,3,4,5],[5,4,3,2]]});E[cp].push(null);E[cp].push(null)}function ca(){au=new Array();au[0]=new Array();au[0][0]={atom:[{pos:{x:0,y:0,z:0},type:a3.PUSAT},{pos:{x:0,y:bV,z:0},type:a3.TERIKAT},{pos:{x:0,y:-bV,z:0},type:a3.TERIKAT}],PEB:0,geomElektron:m.linear,geomMolekul:m.linear,geom:0,apit:[{p1:1,p2:2,label:"180°"},{p1:1,p2:2,label:"180°"}]};au[1]=new Array();au[1][0]={atom:[{pos:{x:0,y:0,z:0},type:a3.PUSAT},{pos:{x:0,y:0,z:bV},type:a3.TERIKAT},{pos:aF(bV,120,90),type:a3.TERIKAT},{pos:aF(bV,120,270),type:a3.TERIKAT}],PEB:0,geomElektron:m.trigonalPlanar,geomMolekul:m.trigonalPlanar,geom:1,apit:[{p1:1,p2:2,label:"120°"},{p1:2,p2:3,label:"120°"},{p1:3,p2:1,label:"120°"}]};au[1][1]={atom:[{pos:{x:0,y:0,z:0},type:a3.PUSAT},{pos:{x:0,y:0,z:bV},type:a3.BEBAS},{pos:aF(bV,130,90),type:a3.TERIKAT},{pos:aF(bV,130,270),type:a3.TERIKAT}],PEB:1,geomElektron:m.trigonalPlanar,geomMolekul:m.bent,geom:1,apit:[{p1:2,p2:3,label:"< 120°"}]};au[2]=new Array();au[2][0]={atom:[{pos:{x:0,y:0,z:0},type:a3.PUSAT},{pos:{x:0,y:0,z:bV},type:a3.TERIKAT},{pos:aF(bV,109.5,60),type:a3.TERIKAT},{pos:aF(bV,-109.5,0),type:a3.TERIKAT},{pos:aF(bV,109.5,-60),type:a3.TERIKAT}],PEB:0,geomElektron:m.tetrahedral,geomMolekul:m.tetrahedral,geom:2,apit:[{p1:1,p2:2,label:"109.5°"},{p1:1,p2:3,label:"109.5°"},{p1:1,p2:4,label:"109.5°"},{p1:2,p2:3,label:"109.5°"},{p1:3,p2:4,label:"109.5°"},{p1:4,p2:2,label:"109.5°"}]};au[2][1]={atom:[{pos:{x:0,y:0,z:0},type:a3.PUSAT},{pos:{x:0,y:0,z:bV},type:a3.BEBAS},{pos:aF(bV,115,60),type:a3.TERIKAT},{pos:aF(bV,-115,0),type:a3.TERIKAT},{pos:aF(bV,115,-60),type:a3.TERIKAT}],PEB:1,geomElektron:m.tetrahedral,geomMolekul:m.trigonalPyramidal,geom:2,apit:[{p1:2,p2:3,label:"< 109.5°"},{p1:3,p2:4,label:"< 109.5°"},{p1:4,p2:2,label:"< 109.5°"}]};au[2][2]={atom:[{pos:{x:0,y:0,z:0},type:a3.PUSAT},{pos:{x:0,y:0,z:bV},type:a3.BEBAS},{pos:aF(bV,112,55),type:a3.TERIKAT},{pos:aF(bV,-120,0),type:a3.BEBAS},{pos:aF(bV,112,-55),type:a3.TERIKAT}],PEB:2,geomElektron:m.tetrahedral,geomMolekul:m.bent,geom:2,apit:[{p1:4,p2:2,label:"< 109.5°"}]};au[3]=new Array();au[3][0]={atom:[{pos:{x:0,y:0,z:0},type:a3.PUSAT},{pos:{x:0,y:0,z:bV},type:a3.TERIKAT},{pos:aF(bV,90,60),type:a3.TERIKAT},{pos:aF(bV,-90,0),type:a3.TERIKAT},{pos:aF(bV,90,-60),type:a3.TERIKAT},{pos:{x:0,y:0,z:-bV},type:a3.TERIKAT}],PEB:0,geomElektron:m.trigonalBipyramidal,geomMolekul:m.trigonalBipyramidal,geom:3,apit:[{p1:1,p2:2,label:"90°"},{p1:1,p2:3,label:"90°"},{p1:1,p2:4,label:"90°"},{p1:5,p2:2,label:"90°"},{p1:5,p2:3,label:"90°"},{p1:5,p2:4,label:"90°"},{p1:2,p2:3,label:"120°"},{p1:3,p2:4,label:"120°"},{p1:4,p2:2,label:"120°"}]};au[3][1]={atom:[{pos:{x:0,y:0,z:0},type:a3.PUSAT},{pos:aF(bV,-3,60),type:a3.TERIKAT},{pos:aF(bV,90,60),type:a3.BEBAS},{pos:aF(bV,-90,3),type:a3.TERIKAT},{pos:aF(bV,90,-63),type:a3.TERIKAT},{pos:aF(bV,183,60),type:a3.TERIKAT}],PEB:1,geomElektron:m.trigonalBipyramidal,geomMolekul:m.seesaw,geom:3,apit:[{p1:1,p2:3,label:"< 90°"},{p1:1,p2:4,label:"< 90°"},{p1:5,p2:3,label:"< 90°"},{p1:5,p2:4,label:"< 90°"},{p1:4,p2:3,label:"< 120°"}]};au[3][2]={atom:[{pos:{x:0,y:0,z:0},type:a3.PUSAT},{pos:aF(bV,-6,0),type:a3.TERIKAT},{pos:aF(bV,90,65),type:a3.BEBAS},{pos:aF(bV,-90,0),type:a3.TERIKAT},{pos:aF(bV,90,-65),type:a3.BEBAS},{pos:aF(bV,186,0),type:a3.TERIKAT}],PEB:2,geomElektron:m.trigonalBipyramidal,geomMolekul:m.tShaped,geom:3,apit:[{p1:1,p2:3,label:"< 90°"},{p1:5,p2:3,label:"< 90°"}]};au[3][3]={atom:[{pos:{x:0,y:0,z:0},type:a3.PUSAT},{pos:{x:0,y:0,z:bV},type:a3.TERIKAT},{pos:aF(bV,90,60),type:a3.BEBAS},{pos:aF(bV,-90,0),type:a3.BEBAS},{pos:aF(bV,90,-60),type:a3.BEBAS},{pos:{x:0,y:0,z:-bV},type:a3.TERIKAT}],PEB:3,geomElektron:m.trigonalBipyramidal,geomMolekul:m.linear,geom:3,apit:[{p1:1,p2:5,label:"180°"},{p1:1,p2:5,label:"180°"},{p1:1,p2:5,label:"180°"}]};au[4]=new Array();au[4][0]={atom:[{pos:{x:0,y:0,z:0},type:a3.PUSAT},{pos:{x:0,y:0,z:bV},type:a3.TERIKAT},{pos:aF(bV,90,0),type:a3.TERIKAT},{pos:aF(bV,90,90),type:a3.TERIKAT},{pos:aF(bV,90,180),type:a3.TERIKAT},{pos:aF(bV,90,270),type:a3.TERIKAT},{pos:{x:0,y:0,z:-bV},type:a3.TERIKAT}],PEB:0,geomElektron:m.octahedral,geomMolekul:m.octahedral,geom:4,apit:[{p1:1,p2:2,label:"90°"},{p1:1,p2:3,label:"90°"},{p1:1,p2:4,label:"90°"},{p1:1,p2:5,label:"90°"},{p1:6,p2:2,label:"90°"},{p1:6,p2:3,label:"90°"},{p1:6,p2:4,label:"90°"},{p1:6,p2:5,label:"90°"},{p1:2,p2:3,label:"90°"},{p1:3,p2:4,label:"90°"},{p1:4,p2:5,label:"90°"},{p1:5,p2:2,label:"90°"}]};au[4][1]={atom:[{pos:{x:0,y:0,z:0},type:a3.PUSAT},{pos:{x:0,y:0,z:bV},type:a3.BEBAS},{pos:aF(bV,105,0),type:a3.TERIKAT},{pos:aF(bV,105,90),type:a3.TERIKAT},{pos:aF(bV,105,180),type:a3.TERIKAT},{pos:aF(bV,105,270),type:a3.TERIKAT},{pos:{x:0,y:0,z:-bV},type:a3.TERIKAT}],PEB:1,geomElektron:m.octahedral,geomMolekul:m.squarePyramidal,geom:4,apit:[{p1:6,p2:2,label:"< 90°"},{p1:6,p2:3,label:"< 90°"},{p1:6,p2:4,label:"< 90°"},{p1:6,p2:5,label:"< 90°"},{p1:2,p2:3,label:"< 90°"},{p1:3,p2:4,label:"< 90°"},{p1:4,p2:5,label:"< 90°"},{p1:5,p2:2,label:"< 90°"}]};au[4][2]={atom:[{pos:{x:0,y:0,z:0},type:a3.PUSAT},{pos:{x:0,y:0,z:bV},type:a3.BEBAS},{pos:aF(bV,90,0),type:a3.TERIKAT},{pos:aF(bV,90,90),type:a3.TERIKAT},{pos:aF(bV,90,180),type:a3.TERIKAT},{pos:aF(bV,90,270),type:a3.TERIKAT},{pos:{x:0,y:0,z:-bV},type:a3.BEBAS}],PEB:2,geomElektron:m.octahedral,geomMolekul:m.squarePlanar,geom:4,apit:[{p1:2,p2:3,label:"90°"},{p1:3,p2:4,label:"90°"},{p1:4,p2:5,label:"90°"},{p1:5,p2:2,label:"90°"}]};au[4][3]={atom:[{pos:{x:0,y:0,z:0},type:a3.PUSAT},{pos:aF(bV,-15,-90),type:a3.BEBAS},{pos:aF(bV,90,15),type:a3.TERIKAT},{pos:aF(bV,90,90),type:a3.TERIKAT},{pos:aF(bV,90,165),type:a3.TERIKAT},{pos:aF(bV,90,270),type:a3.BEBAS},{pos:aF(-bV,15,-90),type:a3.BEBAS}],PEB:3,geomElektron:m.octahedral,geomMolekul:m.tShaped,geom:4,apit:[{p1:2,p2:3,label:"< 90°"},{p1:3,p2:4,label:"< 90°"}],kecuali:true};au[4][4]={atom:[{pos:{x:0,y:0,z:0},type:a3.PUSAT},{pos:{x:0,y:0,z:bV},type:a3.BEBAS},{pos:aF(bV,90,0),type:a3.TERIKAT},{pos:aF(bV,90,90),type:a3.BEBAS},{pos:aF(bV,90,180),type:a3.TERIKAT},{pos:aF(bV,90,270),type:a3.BEBAS},{pos:{x:0,y:0,z:-bV},type:a3.BEBAS}],PEB:4,geomElektron:m.octahedral,geomMolekul:m.linear,geom:4,apit:[{p1:4,p2:2,label:"180°"}],kecuali:true};aO=new Array();H=new Array();bc=new Array();ci=new Array();bd=new Array();var cr={r:1,g:1,b:1};var cq={r:1,g:0,b:0};var cp={r:0,g:1,b:1};aO[0]=aC(V,cr);aO[1]=aC(V,cq);aO[2]=aC(V,cp);H[0]=aC(a7,cr);H[1]=aC(a7,cq);H[2]=aC(a7,cp);bc[0]=aC(av,cr);bc[1]=aC(av,cq);bc[2]=aC(av,cp);ci[0]=aC(L,cr);ci[1]=aC(L,cq);ci[2]=aC(L,cp);bd[0]=aC(ay,cr);bd[1]=aC(ay,cq);bd[2]=aC(ay,cp)}function aC(cp,cq){return{r:Math.round(cp.r*cq.r),g:Math.round(cp.g*cq.g),b:Math.round(cp.b*cq.b)}}function aT(cv,cu){var cA,cy,cw,ct;cA=cv.x;cy=cv.y;cw=cv.z;ct=Math.sqrt(cA*cA+cy*cy+cw*cw);var cq=cA/ct;var cz=cy/ct;var cs=cw/ct;cA=cu.x;cy=cu.y;cw=cu.z;ct=Math.sqrt(cA*cA+cy*cy+cw*cw);var cp=cA/ct;var cx=cy/ct;var cr=cw/ct;return Math.acos(cq*cp+cz*cx+cs*cr)}var ai;var ah;var bT,bP;var aw;function am(cC,cp){var cN,cS,cF,cD;var cR=cC-2;var cV=Math.min(cp,au[cR].length);var cx=au[cR][cV];bu=new Array();for(var cT=0;cT<cx.atom.length;cT++){Ma=cx.atom[cT];bu.push({pos:{x:Ma.pos.x,y:Ma.pos.y,z:Ma.pos.z},type:Ma.type})}if(cx.geom!=null){ai=cx.geom}else{ai=-1}ah=cp;if(cx.kecuali!=null){aw=cx.kecuali}else{aw=false}bT=cx.geomElektron;bP=cx.geomMolekul;Z=new Array();G=new Array();bG=new Array();b8=new Array();cl=new Array();u=new Array();aN=new Array();bE=new Array();b6=new Array();b2=new Array();b=new Array();stickAR=new Array();for(var cT=0;cT<bu.length;cT++){Z.push(bu[cT].pos);G.push({x:0,y:0,z:0});bG.push({x:0,y:0,z:0});b8.push({x:0,y:0,z:0});bE.push({x:0,y:0,z:0});b6.push({x:0,y:0,z:0});aN.push({x:0,y:0,z:0});cl.push({x:0,y:0,z:0});u.push({x:0,y:0,z:0});b2.push({x:0,y:0,z:0});b.push({x:0,y:0,z:0});stickAR.push({x:0,y:0,z:0});switch(bu[cT].type){case a3.TERIKAT:cS=be.distanceBetween(bu[0].pos,bu[cT].pos);cN=aQ-Math.sqrt(aQ*aQ-ax*ax);cF=aQ-cN;cN=aI-Math.sqrt(aI*aI-ax*ax);cD=cS-aI+cN;bG[cT]=h(bu[0].pos,bu[cT].pos,cF);b8[cT]=h(bu[0].pos,bu[cT].pos,cF+(cD-cF)/2);bE[cT]=h(bu[0].pos,bu[cT].pos,cF+(cD-cF)/2);b6[cT]=h(bu[0].pos,bu[cT].pos,cD);aN[cT]=h(bu[0].pos,bu[cT].pos,A);break;case a3.BEBAS:cS=be.distanceBetween(bu[0].pos,bu[cT].pos)-20;cN=aQ-Math.sqrt(aQ*aQ-bn*bn);cF=aQ-cN;bG[cT]=h(bu[0].pos,bu[cT].pos,cF);b8[cT]=h(bu[0].pos,bu[cT].pos,bV+aI-20);var cQ={x:(bu[0].pos.x+bu[cT].pos.x)/2+10,y:(bu[0].pos.y+bu[cT].pos.y)/2+10,z:(bu[0].pos.z+bu[cT].pos.z)/2+10};var cw,cu,cs,cU;var cN;cw=bu[0].pos.x-bu[cT].pos.x;cu=bu[0].pos.y-bu[cT].pos.y;cs=bu[0].pos.z-bu[cT].pos.z;cU=Math.sqrt(cw*cw+cu*cu+cs*cs);var cJ={x:-cw/cU,y:-cu/cU,z:-cs/cU};cw=bu[0].pos.x-cQ.x;cu=bu[0].pos.y-cQ.y;cs=bu[0].pos.z-cQ.z;cU=Math.sqrt(cw*cw+cu*cu+cs*cs);var cL={x:-cw/cU,y:-cu/cU,z:-cs/cU};cw=bu[0].pos.x-bu[cT].pos.x;cu=bu[0].pos.y-bu[cT].pos.y;cs=bu[0].pos.z-bu[cT].pos.z;cU=Math.sqrt(cw*cw+cu*cu+cs*cs);var cK={x:cw/cU,y:cu/cU,z:cs/cU};var cI={x:cL.y*cK.z-cL.z*cK.y,y:cL.z*cK.x-cL.x*cK.z,z:cL.x*cK.y-cL.y*cK.x};cU=Math.sqrt(cI.x*cI.x+cI.y*cI.y+cI.z*cI.z);cI.x/=cU;cI.y/=cU;cI.z/=cU;var cH={x:cI.y*cK.z-cI.z*cK.y,y:cI.z*cK.x-cI.x*cK.z,z:cI.x*cK.y-cI.y*cK.x};cU=Math.sqrt(cH.x*cH.x+cH.y*cH.y+cH.z*cH.z);cH.x/=cU;cH.y/=cU;cH.z/=cU;cN=cS+aI/5;var cE={x:0,y:0,z:0};cE.x=bu[0].pos.x+cJ.x*cN;cE.y=bu[0].pos.y+cJ.y*cN;cE.z=bu[0].pos.z+cJ.z*cN;var cP=[{x:0,y:0,z:0},{x:0,y:0,z:0}];bE[cT].x=cE.x+cH.x*0.3*aI;bE[cT].y=cE.y+cH.y*0.3*aI;bE[cT].z=cE.z+cH.z*0.3*aI;b6[cT].x=cE.x-cH.x*0.3*aI;b6[cT].y=cE.y-cH.y*0.3*aI;b6[cT].z=cE.z-cH.z*0.3*aI;break;default:break}}var cy=0.25;a4=new Array();v=new Array();cx=au[cR][0];for(var cT=0;cT<bu.length;cT++){a4.push({x:cx.atom[cT].pos.x*cy,y:cx.atom[cT].pos.y*cy,z:cx.atom[cT].pos.z*cy});v.push({x:0,y:0,z:0})}bN=new Array();cx=au[cR][cV];for(var cT=0;cT<bu.length;cT++){bN.push({x:cx.atom[cT].pos.x*cy,y:cx.atom[cT].pos.y*cy,z:cx.atom[cT].pos.z*cy})}R=new Array;ae=new Array();bJ=new Array();var cM,cO,cB,cA,cX,cW;var cG={x:0,y:0,z:0};var ct={x:0,y:0,z:0};var cr={x:0,y:0,z:0};var cq={x:0,y:0,z:0};var cZ={x:0,y:0,z:0};var cY={x:0,y:0,z:0};var cv=ax*Math.cos(aK);var cz=ax*Math.sin(aK);if(cx.apit!=null){for(var cT=0;cT<cx.apit.length;cT++){Ma=cx.apit[cT];cq.x=(cx.atom[Ma.p1].pos.x+cx.atom[Ma.p2].pos.x)/2;cq.y=(cx.atom[Ma.p1].pos.y+cx.atom[Ma.p2].pos.y)/2;cq.z=(cx.atom[Ma.p1].pos.z+cx.atom[Ma.p2].pos.z)/2;if(cq.x==0&&cq.y==0&&cq.z==0){cq=aF(bV,90,cT*360/cx.apit.length)}cr.x=cx.atom[Ma.p1].pos.x;cr.y=cx.atom[Ma.p1].pos.y;cr.z=cx.atom[Ma.p1].pos.z;cw=(cr.x-ct.x);cu=(cr.y-ct.y);cs=(cr.z-ct.z);cO=((cq.x-ct.x)*cw+(cq.y-ct.y)*cu+(cq.z-ct.z)*cs)/(cw*cw+cu*cu+cs*cs);cG.x=ct.x+cO*(cr.x-ct.x);cG.y=ct.y+cO*(cr.y-ct.y);cG.z=ct.z+cO*(cr.z-ct.z);cw=cq.x-cG.x;cu=cq.y-cG.y;cs=cq.z-cG.z;cU=Math.sqrt(cw*cw+cu*cu+cs*cs);cX={x:cw/cU,y:cu/cU,z:cs/cU};cw=cx.atom[Ma.p1].pos.x;cu=cx.atom[Ma.p1].pos.y;cs=cx.atom[Ma.p1].pos.z;cU=Math.sqrt(cw*cw+cu*cu+cs*cs);cB={x:cw/cU,y:cu/cU,z:cs/cU};cZ.x=aN[Ma.p1].x+cv*cB.x+cz*cX.x;cZ.y=aN[Ma.p1].y+cv*cB.y+cz*cX.y;cZ.z=aN[Ma.p1].z+cv*cB.z+cz*cX.z;cr.x=cx.atom[Ma.p2].pos.x;cr.y=cx.atom[Ma.p2].pos.y;cr.z=cx.atom[Ma.p2].pos.z;cw=(cr.x-ct.x);cu=(cr.y-ct.y);cs=(cr.z-ct.z);cO=((cq.x-ct.x)*cw+(cq.y-ct.y)*cu+(cq.z-ct.z)*cs)/(cw*cw+cu*cu+cs*cs);cG.x=ct.x+cO*(cr.x-ct.x);cG.y=ct.y+cO*(cr.y-ct.y);cG.z=ct.z+cO*(cr.z-ct.z);cw=cq.x-cG.x;cu=cq.y-cG.y;cs=cq.z-cG.z;cU=Math.sqrt(cw*cw+cu*cu+cs*cs);cX={x:cw/cU,y:cu/cU,z:cs/cU};cw=cx.atom[Ma.p2].pos.x;cu=cx.atom[Ma.p2].pos.y;cs=cx.atom[Ma.p2].pos.z;cU=Math.sqrt(cw*cw+cu*cu+cs*cs);cB={x:cw/cU,y:cu/cU,z:cs/cU};cY.x=aN[Ma.p2].x+cv*cB.x+cz*cX.x;cY.y=aN[Ma.p2].y+cv*cB.y+cz*cX.y;cY.z=aN[Ma.p2].z+cv*cB.z+cz*cX.z;ae.push({x:cZ.x,y:cZ.y,z:cZ.z});bJ.push({x:0,y:0,z:0});ae.push({x:cY.x,y:cY.y,z:cY.z});bJ.push({x:0,y:0,z:0});cw=cq.x;cu=cq.y;cs=cq.z;cU=Math.sqrt(cw*cw+cu*cu+cs*cs);cO={x:cw/cU,y:cu/cU,z:cs/cU};ae.push({x:0.75*bV*cO.x,y:0.75*bV*cO.y,z:0.75*bV*cO.z});bJ.push({x:0,y:0,z:0});cM=aT(cZ,cY);R.push({p1:ae.length-3,p2:ae.length-2,pm:ae.length-1,ang:cM,label:Ma.label})}}}function aF(cs,cq,cr){var cp=cq*B;var ct=cr*B;return{x:cs*Math.sin(cp)*Math.cos(ct),y:cs*Math.sin(cp)*Math.sin(ct),z:cs*Math.cos(cp)}}function h(cp,cs,cq){var cr=be.vectorBetween(cp,cs);return{x:cp.x+cq*cr.Ax,y:cp.y+cq*cr.Ay,z:cp.z+cq*cr.Az}}Array.prototype.insert=function(cp,cq){this.splice(cp,0,cq)};function J(cA,cr,cu,cs){var cD=90;cr.clearRect(cu-cD/2,cs-cD/2,cD,cD);if(n&&ai>=0){var cC;var cq;var cw=[{x:0,y:0,z:0},{x:0,y:0,z:0},{x:0,y:0,z:0}];cA.RotateByMatrix(bN,v,P);var cB=cA.Convert(v[0].x,v[0].y,v[0].z);if(E[ai]!=null){var cz=E[ai][ah];if(cz!=null){var ct=cz.sides;var cp,cv;cr.lineCap="round";cr.lineJoin="round";cr.lineWidth=1;cr.strokeStyle="#303030";for(var cy=0;cy<ct.length;cy++){cp=ct[cy];cw[0].x=v[cp[0]].x;cw[0].y=v[cp[0]].y;cw[0].z=v[cp[0]].z;cw[1].x=v[cp[1]].x;cw[1].y=v[cp[1]].y;cw[1].z=v[cp[1]].z;cw[2].x=v[cp[2]].x;cw[2].y=v[cp[2]].y;cw[2].z=v[cp[2]].z;cq=cA.Visible2(cw);if(!cq.appear){cr.beginPath();for(var cx=0;cx<cp.length;cx++){cv=cp[cx];cC=cA.Convert(v[cv].x,v[cv].y,v[cv].z);if(cx==0){cr.moveTo(cu+cC.x,cs+cC.y)}else{cr.lineTo(cu+cC.x,cs+cC.y)}}cr.closePath();cr.stroke()}}}}cr.fillStyle="#ffffff";for(var cy=1;cy<v.length;cy++){if(bu[cy].type==a3.TERIKAT){cC=cA.Convert(v[cy].x,v[cy].y,v[cy].z);if(cC.s<cB.s){cr.beginPath();cr.arc(cu+cC.x,cs+cC.y,3,0,2*Math.PI,false);cr.fill()}}}cr.lineWidth=1;cr.strokeStyle="#880000";for(var cy=1;cy<v.length;cy++){cr.beginPath();cr.moveTo(cu+cB.x,cs+cB.y);cC=cA.Convert(v[cy].x,v[cy].y,v[cy].z);cr.lineTo(cu+cC.x,cs+cC.y);if(bu[cy].type==a3.BEBAS){}else{cr.lineWidth=2;cr.strokeStyle="#ffffff";cr.stroke()}}cr.beginPath();cr.arc(cu+cB.x,cs+cB.y,4,2*Math.PI,false);cr.fillStyle="#bb0000";cr.fill();if(E[ai]!=null){var cz=E[ai][ah];if(cz!=null){var ct=cz.sides;var cp,cv;cr.lineWidth=1;cr.strokeStyle="#b0b0b0";for(var cy=0;cy<ct.length;cy++){cp=ct[cy];cw[0].x=v[cp[0]].x;cw[0].y=v[cp[0]].y;cw[0].z=v[cp[0]].z;cw[1].x=v[cp[1]].x;cw[1].y=v[cp[1]].y;cw[1].z=v[cp[1]].z;cw[2].x=v[cp[2]].x;cw[2].y=v[cp[2]].y;cw[2].z=v[cp[2]].z;cq=cA.Visible2(cw);if(cq.appear){cr.beginPath();for(var cx=0;cx<cp.length;cx++){cv=cp[cx];cC=cA.Convert(v[cv].x,v[cv].y,v[cv].z);if(cx==0){cr.moveTo(cu+cC.x,cs+cC.y)}else{cr.lineTo(cu+cC.x,cs+cC.y)}}cr.closePath();vr=Math.round(255*(cq.angle)/180);cr.fillStyle="rgba("+vr+","+vr+","+vr+",0.6)";cr.fill();cr.stroke()}}}}cr.fillStyle="#ffffff";for(var cy=1;cy<v.length;cy++){if(bu[cy].type==a3.TERIKAT){cC=cA.Convert(v[cy].x,v[cy].y,v[cy].z);if(cC.s>=cB.s){cr.beginPath();cr.arc(cu+cC.x,cs+cC.y,3,0,2*Math.PI,false);cr.fill()}}}}}function b1(cA,cr,cu,cs){var cD=90;cr.clearRect(cu-cD/2,cs-cD/2,cD,cD);if(o&&ai>=0){var cC;var cq,cE;var cw=[{x:0,y:0,z:0},{x:0,y:0,z:0},{x:0,y:0,z:0}];cA.RotateByMatrix(a4,v,P);var cz=bk[ai];var ct=cz.sides;var cp,cv;cr.lineCap="round";cr.lineJoin="round";cr.lineWidth=1;cr.strokeStyle="#303030";for(var cy=0;cy<ct.length;cy++){cp=ct[cy];cw[0].x=v[cp[0]].x;cw[0].y=v[cp[0]].y;cw[0].z=v[cp[0]].z;cw[1].x=v[cp[1]].x;cw[1].y=v[cp[1]].y;cw[1].z=v[cp[1]].z;cw[2].x=v[cp[2]].x;cw[2].y=v[cp[2]].y;cw[2].z=v[cp[2]].z;cq=cA.Visible2(cw);if(!cq.appear){cr.beginPath();for(var cx=0;cx<cp.length;cx++){cv=cp[cx];cC=cA.Convert(v[cv].x,v[cv].y,v[cv].z);if(cx==0){cr.moveTo(cu+cC.x,cs+cC.y)}else{cr.lineTo(cu+cC.x,cs+cC.y)}}cr.closePath();cr.stroke()}}var cB=cA.Convert(v[0].x,v[0].y,v[0].z);cr.beginPath();for(var cy=1;cy<v.length;cy++){cr.moveTo(cu+cB.x,cs+cB.y);cC=cA.Convert(v[cy].x,v[cy].y,v[cy].z);cr.lineTo(cu+cC.x,cs+cC.y)}cr.lineWidth=1;cr.strokeStyle="#880000";cr.stroke();cr.beginPath();cr.arc(cu+cB.x,cs+cB.y,4,2*Math.PI,false);cr.fillStyle="#880000";cr.fill();cr.lineWidth=1;cr.strokeStyle="#b0b0b0";for(var cy=0;cy<ct.length;cy++){cp=ct[cy];cw[0].x=v[cp[0]].x;cw[0].y=v[cp[0]].y;cw[0].z=v[cp[0]].z;cw[1].x=v[cp[1]].x;cw[1].y=v[cp[1]].y;cw[1].z=v[cp[1]].z;cw[2].x=v[cp[2]].x;cw[2].y=v[cp[2]].y;cw[2].z=v[cp[2]].z;cq=cA.Visible2(cw);if(cq.appear){cr.beginPath();for(var cx=0;cx<cp.length;cx++){cv=cp[cx];cC=cA.Convert(v[cv].x,v[cv].y,v[cv].z);if(cx==0){cr.moveTo(cu+cC.x,cs+cC.y)}else{cr.lineTo(cu+cC.x,cs+cC.y)}}cr.closePath();cE=Math.round(255*(cq.angle)/180);cr.fillStyle="rgba("+cE+","+cE+","+cE+",0.6)";cr.fill();cr.stroke()}}}}function bF(cO,cs,cv,cu,cx){cs.clearRect(cv-bU/2,cu-aA/2,bU,aA);var cN,cG,cw,cB;var cM;var cr,cq;var cD;cO.RotateByMatrix(Z,G,P);cO.RotateByMatrix(bG,cl,P);cO.RotateByMatrix(b8,u,P);cO.RotateByMatrix(bE,b2,P);cO.RotateByMatrix(b6,b,P);cO.RotateByMatrix(aN,stickAR,P);cO.RotateByMatrix(ae,bJ,P);cG=cO.Convert(G[0].x,G[0].y,G[0].z);var cz=new Array();for(var cK=0;cK<G.length;cK++){cz.push({index:cK,pos:{x:G[cK].x,y:G[cK].y,z:G[cK].z},type:bu[cK].type})}for(var cK=0;cK<G.length;cK++){if(bu[cK].type==a3.TERIKAT){cz.push({index:cK,pos:{x:cl[cK].x,y:cl[cK].y,z:cl[cK].z},type:a3.STICK})}}for(var cK=0;cK<R.length;cK++){cz.push({index:cK,pos:{x:bJ[R[cK].pm].x,y:bJ[R[cK].pm].y,z:bJ[R[cK].pm].z},type:a3.APIT,p1:R[cK].p1,p2:R[cK].p2,ang:R[cK].ang,pm:R[cK].pm,label:R[cK].label})}var cS=cO.sortVerticesPos(cz);var cI,cH,cR,cy;var ct;var cC,cA,cQ,cP;var cL;var cE;var cK=0;while(cK<cS.length){cI=cS[cK].index;cR=cz[cI].index;if(cz[cI].type==a3.STICK){if(cK<cS.length-1){for(var cJ=cK+1;cJ<cS.length;cJ++){cI=cS[cJ].index;cy=cz[cI].index;if(cR==cy&&cz[cI].type==a3.TERIKAT){cN=cO.Convert(G[cy].x,G[cy].y,G[cy].z);if((cN.s/cG.s)<1.1){cB=cO.Convert(cl[cy].x,cl[cy].y,cl[cy].z);ct=z(cO,cv,cu,b2[cy],b[cy],b[cy],ax);cE=bD(G[cy],b2[cy],aI);cw=cO.Convert(cE.x,cE.y,cE.z);cC=cw.x-cB.x;cA=cw.y-cB.y;cQ=Math.sqrt(cC*cC+cA*cA);cw=cO.Convert(ct.x,ct.y,ct.z);cC=cw.x-cB.x;cA=cw.y-cB.y;cP=Math.sqrt(cC*cC+cA*cA);cL=(cQ<=cP);if(cL){cS.splice(cJ+1,0,{index:cS[cK].index,depth:cS[cK].depth});cS.splice(cK,1);cK--;break}}}}}}cK++}var cK=0;var cF;while(cK<cS.length){cI=cS[cK].index;cR=cz[cI].index;if(cz[cI].type==a3.STICK||cz[cI].type==a3.BEBAS){cF=(cz[cI].type==a3.STICK)?ax:bn;if(cK<cS.length-1){for(var cJ=cK+1;cJ<cS.length;cJ++){cI=cS[cJ].index;if(cz[cI].type==a3.PUSAT){cy=cz[cI].index;cE=bD(G[cy],G[cR],aQ);ct=z(cO,cv,cu,cl[cR],u[cR],cl[cR],cF);cw=cO.Convert(cE.x,cE.y,cE.z);cC=cw.x-cG.x;cA=cw.y-cG.y;cQ=Math.sqrt(cC*cC+cA*cA);cw=cO.Convert(ct.x,ct.y,ct.z);cC=cw.x-cG.x;cA=cw.y-cG.y;cP=Math.sqrt(cC*cC+cA*cA);cN=cO.Convert(G[cy].x,G[cy].y,G[cy].z);if(cN.s<=cG.s){cL=(cQ<=cP);if(!cL){cS.splice(cJ+1,0,{index:cS[cK].index,depth:cS[cK].depth});cS.splice(cK,1);cK--;break}}}}}}cK++}var cp;for(var cK=0;cK<cS.length;cK++){cI=cS[cK].index;cH=cz[cI].index;switch(cz[cI].type){case a3.PUSAT:cN=cO.Convert(G[0].x,G[0].y,G[0].z);bQ(cs,cv+cN.x,cu+cN.y,aQ*cN.s,aO[cx]);break;case a3.TERIKAT:cN=cO.Convert(G[cH].x,G[cH].y,G[cH].z);bQ(cs,cv+cN.x,cu+cN.y,aI*cN.s,H[cx]);break;case a3.STICK:co(cO,cs,cv,cu,cl[cH],u[cH],aO[cx]);co(cO,cs,cv,cu,b2[cH],b[cH],H[cx]);break;case a3.BEBAS:if(cc){a8(cO,bj,U/2,C/2,cs,cv,cu,cl[cH],u[cH],b2[cH],b[cH],bn,aI,bc[cx])}break;case a3.APIT:if(aS){bl(cO,cs,cv,cu,cz[cI],ci[cx],bd[cx])}}}for(var cK=0;cK<bJ.length;cK++){cw=cO.Convert(bJ[cK].x,bJ[cK].y,bJ[cK].z)}}function bl(cJ,cu,cz,cy,cB,cI,cH){var cA,cq,cr;var cx={x:0,y:0,z:0};var cw={x:0,y:0,z:0};var cv={x:0,y:0,z:0};var cC={x:0,y:0,z:0};var cE=20;var cK;var cD,cL;var cp,ct;var cF;var cs=cJ.GetScale(0,0,0);cq=cJ.GetScale(cB.pos.x,cB.pos.y,cB.pos.z);cK=cB.ang;if(cK>0.8*Math.PI){cF=1.04}else{cF=1}if((cq/cs)>cF){cr=Math.min(1,20*((cq/cs)-cF));cv.x=bJ[cB.pm].x;cv.y=bJ[cB.pm].y;cv.z=bJ[cB.pm].z;cw.x=bJ[cB.p1].x;cw.y=bJ[cB.p1].y;cw.z=bJ[cB.p1].z;dx=(cw.x-cx.x);dy=(cw.y-cx.y);dz=(cw.z-cx.z);q=((cv.x-cx.x)*dx+(cv.y-cx.y)*dy+(cv.z-cx.z)*dz)/(dx*dx+dy*dy+dz*dz);cC.x=cx.x+q*(cw.x-cx.x);cC.y=cx.y+q*(cw.y-cx.y);cC.z=cx.z+q*(cw.z-cx.z);dx=cv.x-cC.x;dy=cv.y-cC.y;dz=cv.z-cC.z;d=Math.sqrt(dx*dx+dy*dy+dz*dz);v1={x:dx/d,y:dy/d,z:dz/d};dx=(cw.x-cx.x);dy=(cw.y-cx.y);dz=(cw.z-cx.z);d=Math.sqrt(dx*dx+dy*dy+dz*dz);u1={x:dx/d,y:dy/d,z:dz/d};cD=2*A*Math.sin(0.5*cK/cE);cL=0.5*(Math.PI-cK/cE);cL=2*(aK-cL);ct=cD*Math.cos(cL);cp=cD*Math.sin(cL);cu.beginPath();cC.x=cw.x;cC.y=cw.y;cC.z=cw.z;cA=cJ.Convert(cC.x,cC.y,cC.z);cu.moveTo(cz+cA.x,cy+cA.y);for(var cG=0;cG<=cE;cG++){ct=cD*Math.cos(aK+cG*cL);cp=cD*Math.sin(aK+cG*cL);cC.x+=ct*u1.x+cp*v1.x;cC.y+=ct*u1.y+cp*v1.y;cC.z+=ct*u1.z+cp*v1.z;cA=cJ.Convert(cC.x,cC.y,cC.z);cu.lineTo(cz+cA.x,cy+cA.y)}cu.lineWidth=2;cu.strokeStyle="rgba("+cI.r+","+cI.g+","+cI.b+","+cr+")";cu.stroke();cu.font=AdaptiveFontSize.fix("14pt serif");cu.textBaseline="middle";cu.textAlign="center";cu.fillStyle="rgba("+cH.r+","+cH.g+","+cH.b+","+cr+")";cA=cJ.Convert(bJ[cB.pm].x,bJ[cB.pm].y,bJ[cB.pm].z);cu.fillText(cB.label,cz+cA.x,cy+cA.y)}}function bD(cv,cw,cr){var ct=cw.x-cv.x;var cs=cw.y-cv.y;var cq=cw.z-cv.z;d=Math.sqrt(ct*ct+cs*cs+cq*cq);var cu={x:ct/d,y:cs/d,z:cq/d};var cp={x:0,y:0,z:0};cp.x=cv.x+cr*cu.x;cp.y=cv.y+cr*cu.y;cp.z=cv.z+cr*cu.z;return cp}function z(cO,cv,cu,cJ,cI,cM,cP){var cs={x:(cJ.x+cI.x)/2+10,y:(cJ.y+cI.y)/2+10,z:(cJ.z+cI.z)/2+10};var cC,cB,cA,cN;cC=cJ.x-cs.x;cB=cJ.y-cs.y;cA=cJ.z-cs.z;cN=Math.sqrt(cC*cC+cB*cB+cA*cA);var cE={x:-cC/cN,y:-cB/cN,z:-cA/cN};cC=cJ.x-cI.x;cB=cJ.y-cI.y;cA=cJ.z-cI.z;cN=Math.sqrt(cC*cC+cB*cB+cA*cA);var cD={x:cC/cN,y:cB/cN,z:cA/cN};var cz={x:cE.y*cD.z-cE.z*cD.y,y:cE.z*cD.x-cE.x*cD.z,z:cE.x*cD.y-cE.y*cD.x};cN=Math.sqrt(cz.x*cz.x+cz.y*cz.y+cz.z*cz.z);cz.x/=cN;cz.y/=cN;cz.z/=cN;var cy={x:cz.y*cD.z-cz.z*cD.y,y:cz.z*cD.x-cz.x*cD.z,z:cz.x*cD.y-cz.y*cD.x};cN=Math.sqrt(cy.x*cy.x+cy.y*cy.y+cy.z*cy.z);cy.x/=cN;cy.y/=cN;cy.z/=cN;var cG,cr,cq;var cw;var cH=8;var cK;var cx={x:0,y:0,z:0};var cp;var ct=-9999;var cL={x:0,y:0,z:0};for(var cF=0;cF<360;cF+=cH){cG=cF*B;cr=Math.cos(cG);cq=Math.sin(cG);cx.x=cM.x+cP*cr*cz.x+cP*cq*cy.x;cx.y=cM.y+cP*cr*cz.y+cP*cq*cy.y;cx.z=cM.z+cP*cr*cz.z+cP*cq*cy.z;cw=cO.Convert(cx.x,cx.y,cx.z);cp=cO.GetScale(cx.x,cx.y,cx.z);if(cp>ct){ct=cp;cL.x=cx.x;cL.y=cx.y;cL.z=cx.z}}return cL}function co(cO,cs,cu,ct,cL,cK,cJ){var cr={x:(cL.x+cK.x)/2+10,y:(cL.y+cK.y)/2+10,z:(cL.z+cK.z)/2+10};var cB,cA,cz,cN;cB=cL.x-cr.x;cA=cL.y-cr.y;cz=cL.z-cr.z;cN=Math.sqrt(cB*cB+cA*cA+cz*cz);var cD={x:-cB/cN,y:-cA/cN,z:-cz/cN};cB=cL.x-cK.x;cA=cL.y-cK.y;cz=cL.z-cK.z;cN=Math.sqrt(cB*cB+cA*cA+cz*cz);var cC={x:cB/cN,y:cA/cN,z:cz/cN};var cy={x:cD.y*cC.z-cD.z*cC.y,y:cD.z*cC.x-cD.x*cC.z,z:cD.x*cC.y-cD.y*cC.x};cN=Math.sqrt(cy.x*cy.x+cy.y*cy.y+cy.z*cy.z);cy.x/=cN;cy.y/=cN;cy.z/=cN;var cx={x:cy.y*cC.z-cy.z*cC.y,y:cy.z*cC.x-cy.x*cC.z,z:cy.x*cC.y-cy.y*cC.x};cN=Math.sqrt(cx.x*cx.x+cx.y*cx.y+cx.z*cx.z);cx.x/=cN;cx.y/=cN;cx.z/=cN;var cF,cq,cp;var cv;cs.lineWidth=1;cs.lineCap="round";cs.strokeStyle="#000000";var cH=8;var cM;var cI,cP;var cw=[{x:0,y:0,z:0},{x:0,y:0,z:0},{x:0,y:0,z:0},{x:0,y:0,z:0}];var cG;for(var cE=0;cE<360;cE+=cH){cF=cE*B;cM=((cE+cH+3)%360)*B;cq=Math.cos(cF);cp=Math.sin(cF);cI=Math.cos(cM);cP=Math.sin(cM);cw[0].x=cL.x+ax*cq*cy.x+ax*cp*cx.x;cw[0].y=cL.y+ax*cq*cy.y+ax*cp*cx.y;cw[0].z=cL.z+ax*cq*cy.z+ax*cp*cx.z;cw[1].x=cL.x+ax*cI*cy.x+ax*cP*cx.x;cw[1].y=cL.y+ax*cI*cy.y+ax*cP*cx.y;cw[1].z=cL.z+ax*cI*cy.z+ax*cP*cx.z;cw[2].x=cK.x+ax*cI*cy.x+ax*cP*cx.x;cw[2].y=cK.y+ax*cI*cy.y+ax*cP*cx.y;cw[2].z=cK.z+ax*cI*cy.z+ax*cP*cx.z;cw[3].x=cK.x+ax*cq*cy.x+ax*cp*cx.x;cw[3].y=cK.y+ax*cq*cy.y+ax*cp*cx.y;cw[3].z=cK.z+ax*cq*cy.z+ax*cp*cx.z;cG=cO.Visible2(cw);if(cG.appear){cs.beginPath();cv=cO.Convert(cw[0].x,cw[0].y,cw[0].z);cs.moveTo(cu+cv.x,ct+cv.y);cv=cO.Convert(cw[1].x,cw[1].y,cw[1].z);cs.lineTo(cu+cv.x,ct+cv.y);cv=cO.Convert(cw[2].x,cw[2].y,cw[2].z);cs.lineTo(cu+cv.x,ct+cv.y);cv=cO.Convert(cw[3].x,cw[3].y,cw[3].z);cs.lineTo(cu+cv.x,ct+cv.y);cs.closePath();vr=(cG.angle)/180;cs.fillStyle="rgb("+Math.round(vr*cJ.r)+","+Math.round(vr*cJ.g)+","+Math.round(vr*cJ.b)+")";cs.fill()}}}function a8(cS,dc,cM,cL,cz,cX,cK,cy,cx,c7,c6,c0,cA,cN){dc.clearRect(0,0,U,C);var cv=cS.distanceBetween(cy,cx);var cE=c0;var cD=0.2*cA;var cG=cA-cD;var c4={x:(cy.x+cx.x)/2+10,y:(cy.y+cx.y)/2+10,z:(cy.z+cx.z)/2+10};var ct,cr,cp,c9;var c2;ct=cy.x-cx.x;cr=cy.y-cx.y;cp=cy.z-cx.z;c9=Math.sqrt(ct*ct+cr*cr+cp*cp);var cV={x:-ct/c9,y:-cr/c9,z:-cp/c9};ct=cy.x-c4.x;cr=cy.y-c4.y;cp=cy.z-c4.z;c9=Math.sqrt(ct*ct+cr*cr+cp*cp);var cY={x:-ct/c9,y:-cr/c9,z:-cp/c9};ct=cy.x-cx.x;cr=cy.y-cx.y;cp=cy.z-cx.z;c9=Math.sqrt(ct*ct+cr*cr+cp*cp);var cW={x:ct/c9,y:cr/c9,z:cp/c9};var cT={x:cY.y*cW.z-cY.z*cW.y,y:cY.z*cW.x-cY.x*cW.z,z:cY.x*cW.y-cY.y*cW.x};c9=Math.sqrt(cT.x*cT.x+cT.y*cT.y+cT.z*cT.z);cT.x/=c9;cT.y/=c9;cT.z/=c9;var cR={x:cT.y*cW.z-cT.z*cW.y,y:cT.z*cW.x-cT.x*cW.z,z:cT.x*cW.y-cT.y*cW.x};c9=Math.sqrt(cR.x*cR.x+cR.y*cR.y+cR.z*cR.z);cR.x/=c9;cR.y/=c9;cR.z/=c9;c2=cA/5;var cs=cS.Convert(c7.x,c7.y,c7.z);var cq=cS.Convert(c6.x,c6.y,c6.z);if(cs.s<cq.s){bQ(cz,cX+cs.x,cK+cs.y,c2*cs.s,{r:255,g:255,b:255});bQ(cz,cX+cq.x,cK+cq.y,c2*cq.s,{r:255,g:255,b:255})}else{bQ(cz,cX+cq.x,cK+cq.y,c2*cq.s,{r:255,g:255,b:255});bQ(cz,cX+cs.x,cK+cs.y,c2*cs.s,{r:255,g:255,b:255})}var c1,cu,cB;var cQ;var cw=8;var cH;var cJ,cI;var cO=[{x:0,y:0,z:0},{x:0,y:0,z:0},{x:0,y:0,z:0},{x:0,y:0,z:0}];var c5;var c8,cP,cU;var c3={x:0,y:0,z:0};var cF={x:0,y:0,z:0};var cC=4;var db;db=-(cA-cE)/((cv-cG)*(cv-cG));for(var da=0;da<=cv;da+=cC){c8=da;if(da<=(cv-cG)){c2=cE+db*Math.pow((c8-(cv-cG)),2)+(cA-cE)}else{c2=cD+Math.sqrt(cG*cG-Math.pow(c8-(cv-cG),2))}c3.x=cy.x+cV.x*c8;c3.y=cy.y+cV.y*c8;c3.z=cy.z+cV.z*c8;c8=Math.min((da+cC+1),cv);if(c8<=(cv-cG)){cU=cE+db*Math.pow((c8-(cv-cG)),2)+(cA-cE)}else{cU=cD+Math.sqrt(cG*cG-Math.pow(c8-(cv-cG),2))}cF.x=cy.x+cV.x*c8;cF.y=cy.y+cV.y*c8;cF.z=cy.z+cV.z*c8;for(var cZ=0;cZ<360;cZ+=cw){c1=cZ*Math.PI/180;cH=((cZ+cw+1)%360)*Math.PI/180;cu=Math.cos(c1);cB=Math.sin(c1);cJ=Math.cos(cH);cI=Math.sin(cH);cO[0].x=c3.x+c2*cu*cT.x+c2*cB*cR.x;cO[0].y=c3.y+c2*cu*cT.y+c2*cB*cR.y;cO[0].z=c3.z+c2*cu*cT.z+c2*cB*cR.z;cO[1].x=c3.x+c2*cJ*cT.x+c2*cI*cR.x;cO[1].y=c3.y+c2*cJ*cT.y+c2*cI*cR.y;cO[1].z=c3.z+c2*cJ*cT.z+c2*cI*cR.z;cO[2].x=cF.x+cU*cJ*cT.x+cU*cI*cR.x;cO[2].y=cF.y+cU*cJ*cT.y+cU*cI*cR.y;cO[2].z=cF.z+cU*cJ*cT.z+cU*cI*cR.z;cO[3].x=cF.x+cU*cu*cT.x+cU*cB*cR.x;cO[3].y=cF.y+cU*cu*cT.y+cU*cB*cR.y;cO[3].z=cF.z+cU*cu*cT.z+cU*cB*cR.z;c5=cS.Visible2(cO);if(c5.appear){dc.beginPath();cQ=cS.Convert(cO[0].x,cO[0].y,cO[0].z);dc.moveTo(cM+cQ.x,cL+cQ.y);cQ=cS.Convert(cO[1].x,cO[1].y,cO[1].z);dc.lineTo(cM+cQ.x,cL+cQ.y);cQ=cS.Convert(cO[2].x,cO[2].y,cO[2].z);dc.lineTo(cM+cQ.x,cL+cQ.y);cQ=cS.Convert(cO[3].x,cO[3].y,cO[3].z);dc.lineTo(cM+cQ.x,cL+cQ.y);dc.closePath();vr=0+1*(c5.angle)/180;dc.fillStyle="rgba("+Math.round(vr*cN.r)+","+Math.round(vr*cN.g)+","+Math.round(vr*cN.b)+",1)";dc.fill()}}}for(var cZ=0;cZ<360;cZ+=cw){c1=cZ*Math.PI/180;cH=((cZ+cw+2)%360)*Math.PI/180;cu=Math.cos(c1);cB=Math.sin(c1);cJ=Math.cos(cH);cI=Math.sin(cH);cO[0].x=cF.x+cU*cu*cT.x+cU*cB*cR.x;cO[0].y=cF.y+cU*cu*cT.y+cU*cB*cR.y;cO[0].z=cF.z+cU*cu*cT.z+cU*cB*cR.z;cO[1].x=cF.x+cU*cJ*cT.x+cU*cI*cR.x;cO[1].y=cF.y+cU*cJ*cT.y+cU*cI*cR.y;cO[1].z=cF.z+cU*cJ*cT.z+cU*cI*cR.z;cO[2].x=cx.x;cO[2].y=cx.y;cO[2].z=cx.z;c5=cS.Visible2(cO);if(c5.appear){dc.beginPath();cQ=cS.Convert(cO[0].x,cO[0].y,cO[0].z);dc.moveTo(cM+cQ.x,cL+cQ.y);cQ=cS.Convert(cO[1].x,cO[1].y,cO[1].z);dc.lineTo(cM+cQ.x,cL+cQ.y);cQ=cS.Convert(cO[2].x,cO[2].y,cO[2].z);dc.lineTo(cM+cQ.x,cL+cQ.y);dc.closePath();vr=0+1*(c5.angle)/180;dc.fillStyle="rgb("+Math.round(vr*cN.r)+","+Math.round(vr*cN.g)+","+Math.round(vr*cN.b)+",1)";dc.fill()}}cz.globalAlpha=0.7;cz.drawImage(dc.canvas,0,0,U,C,cX-U/2,cK-C/2,U,C);cz.globalAlpha=1}CanvasRenderingContext2D.prototype.clearMe=function(){this.clearRect(0,0,this.canvas.width/bb,this.canvas.height/bS)};CanvasRenderingContext2D.prototype.drawShape=function(cq,cp,cr){this.drawImage(N[cq.source],cq.x,cq.y,cq.width,cq.height,cp-cq.ofsX,cr-cq.ofsY,cq.width,cq.height)};var b9=false;var bM=false;var ao;function aY(cp){if(!cp){var cp=window.event}if(bM){cp.preventDefault();cp.stopPropagation()}else{downMode="mouse";bA(cp,cp.pageX,cp.pageY)}}function bO(cp){if(!cp){var cp=window.event}if(b9||bM){cp.preventDefault();cp.stopPropagation()}else{downMode="touch";var cq=cp.targetTouches[0];ao=cq.identifier;bA(cp,cq.pageX,cq.pageY)}}var aX,aV;var aR;var ar={NONE:0,ROTATE:1,SELECTMENU:2};function bA(cs,cq,cp){var cy=(cq-b4.x)/bb;var cv=(cp-b4.y)/bS;const cw=window.devicePixelRatio||1;aX=cy/cw;aV=cv/cw;var cx,cu;aR=ar.NONE;for(var cr=0;cr<b7.length;cr++){if(cy>=b7[cr].x1&&cy<b7[cr].x2&&cv>b7[cr].y1&&cv<b7[cr].y2){if((cr+2)!=aH){aH=cr+2;aa=0;am(aH,aa);e();bp();ap(aH,aa);k=true}aR=ar.SELECTMENU;break}}if(aR==ar.NONE){for(var cr=0;cr<aP.length;cr++){if(cy>=aP[cr].x1&&cy<aP[cr].x2&&cv>aP[cr].y1&&cv<aP[cr].y2){if(aP[cr].peb!=aa){aa=aP[cr].peb;am(aH,aa);e();bp();ap(aH,aa);k=true}aR=ar.SELECTMENU;break}}}if(aR==ar.NONE){cx=(cq-a9.x)/bb;cu=(cp-a9.y)/bS;var ct=(downMode=="touch")?10:0;for(var cr=0;cr<ad.length;cr++){if(cx>=ad[cr].x1-ct&&cx<ad[cr].x2+ct&&cu>ad[cr].y1-ct&&cu<ad[cr].y2+ct){switch(cr){case 0:o=!o;bp();k=true;break;case 1:n=!n;bp();k=true;break;case 2:cc=!cc;bp();k=true;break;case 3:aS=!aS;bp();k=true;break;case 4:at=!at;bp();k=true;break}aR=ar.SELECTMENU;break}}}if(aR==ar.NONE){if(cv>(c-aA/2-50)&&cv<(c+aA/2+50)){cb=false;document.body.style.cursor="pointer";if(downMode=="mouse"){b9=true;document.addEventListener("mouseup",X);document.addEventListener("mousemove",a6)}else{bM=true;document.addEventListener("touchend",l);document.addEventListener("touchmove",bZ)}}}}function X(cp){if(!cp){var cp=window.event}cp.preventDefault();cp.stopPropagation();document.body.style.cursor="default";document.removeEventListener("mouseup",X);document.removeEventListener("mousemove",a6);a(cp,(cp.pageX-b4.x)/bb,(cp.pageY-b4.y)/bS);b9=false;aR=ar.PUSAT}function l(cp){if(!cp){var cp=window.event}var cq=cp.changedTouches[0];if(cq.identifier==ao){cp.preventDefault();cp.stopPropagation();document.body.style.cursor="default";document.removeEventListener("touchend",l);document.removeEventListener("touchmove",bZ);a(cp,(cq.pageX-b4.x)/bb,(cq.pageY-b4.y)/bS);bM=false;aR=ar.PUSAT}}function a(cq,cr,cp){document.body.style.cursor="default"}function a6(cq){if(!cq){var cq=window.event}cq.preventDefault();cq.stopPropagation();const cp=window.devicePixelRatio||1;bL((cq.pageX-b4.x)/(bb*cp),(cq.pageY-b4.y)/(bS*cp))}function bZ(cq){if(!cq){var cq=window.event}var cr=cq.changedTouches[0];if(cr.identifier==ao){cq.preventDefault();cq.stopPropagation();const cp=window.devicePixelRatio||1;bL((cr.pageX-b4.x)/(bb*cp),(cr.pageY-b4.y)/(bS*cp))}}function bL(ct,cs){const cr=0.6*Math.pow((window.devicePixelRatio||1),0.05);var cq=(ct-aX)/cr;var cp=(cs-aV)/cr;aX=ct;aV=cs;ck=0;O=cp;aE=cq;k=true}function bh(cs,cr){var cq,cp;cp=1;for(cq=cr+1;cq<=cs;cq++){cp=cp*cq}for(cq=1;cq<=cs-cr;cq++){cp=Math.floor(cp/cq)}return cp}function af(cs,ct,cr){var cq,cp;cp=bh(ct,cs);for(cq=1;cq<=cs;cq++){cp=cp*cr}for(cq=1;cq<=ct-cs;cq++){cp=cp*(1-cr)}return cp}function p(cr,cv,ct){var cs,cq,cp,cu;cp=0;cu=0;for(cs=0;cs<=cv;cs++){cq=af(cs,cv,cr);cp=cp+ct[cs].x*cq;cu=cu+ct[cs].y*cq}return{x:cp,y:cu}}function bW(cp){var cq=curtop=0;if(cp.offsetParent){do{cq+=cp.offsetLeft;curtop+=cp.offsetTop}while(cp=cp.offsetParent)}return{x:cq,y:curtop}}function F(cp){var cz=container.offsetWidth;var ct=container.offsetHeight;var cu,cw;var cr,cq;switch(T){case"":case"default":bb=1;bS=1;cu=br*bb;cw=aL*bS;cr=(cz-cu)/2;cq=(ct-cw)/2;break;case"auto":bb=Math.min(cz/br,ct/aL);bS=bb;cu=br*bb;cw=aL*bS;cr=(cz-cu)/2;cq=(ct-cw)/2;break;case"fit":bb=cz/br;bS=ct/aL;cu=br*bb;cw=aL*bS;cr=(cz-cu)/2;cq=(ct-cw)/2;break;case"fitwidth":bb=cz/br;bS=bb;cu=br*bb;cw=aL*bS;cr=(cz-cu)/2;cq=(ct-cw)/2;break;case"fitheight":bS=ct/aL;bb=bS;cu=br*bb;cw=aL*bS;cr=(cz-cu)/2;cq=(ct-cw)/2;break}const cv=window.devicePixelRatio||1;for(var cs=0;cs<cp.length;cs++){cp[cs].canvas.getContext("2d").scale(bb,bS);cp[cs].canvas.style.position="absolute";cp[cs].canvas.style.left=cr+cp[cs].x*bb+"px";cp[cs].canvas.style.top=cq+cp[cs].y*bS+"px";cp[cs].canvas.width=cp[cs].width*bb*cv;cp[cs].canvas.height=cp[cs].height*bS*cv;cp[cs].canvas.style.width=cp[cs].width*bb+"px";cp[cs].canvas.style.height=cp[cs].height*bS+"px";cp[cs].canvas.getContext("2d").scale(bb*cv,bS*cv)}b4=bW(w);a9=bW(s)}function bX(){var cp=/%/;if(cp.test(container.style.width)||cp.test(container.style.height)){F(canvasList)}b4=bW(w);a9=bW(s);aB()}(function(){function cp(cr,cs){cs=cs||{bubbles:false,cancelable:false,detail:undefined};var cq=document.createEvent("CustomEvent");cq.initCustomEvent(cr,cs.bubbles,cs.cancelable,cs.detail);return cq}cp.prototype=window.Event.prototype;window.CustomEvent=cp})()};