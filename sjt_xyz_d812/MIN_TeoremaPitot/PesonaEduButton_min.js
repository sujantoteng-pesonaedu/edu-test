function PesonaEduButton(U,M,A,z,j,E,J,Y,k,W,am,ak,D,R,h){var K;if(h===undefined){K=false}else{K=h}var m=am;var af=ak;var r=false;var V=U;var P=M;var f=A;var e=z;var S;var Q;var c=j.width;var q=j.height;var v={left:j.margin.left,right:j.margin.right,top:j.margin.top,bottom:j.margin.bottom};var ae=E;var i=J;var ap=Y;var s=k;var ag=W;var ab=D;var o=null;var g=(V.name)?V.name+((V.index)?U.index:""):V;g+="@buttons";var t=v.left+c+v.right;var w=v.top+q+v.bottom;var y=document.createElement("canvas");var x;var O;if(R===undefined){x=PesonaBasic.addCanvas(g,{canvas:y,index:P,x:A-t/2,y:z-w/2,width:t,height:w},K)}else{x=PesonaBasic.addCanvas(g,{container:R,canvas:y,index:P,x:A-t/2,y:z-w/2,width:t,height:w},K)}y.style.visibility=(af)?"visible":"hidden";if(K){y.addEventListener("mousedown",ad);y.addEventListener("touchstart",X)}var S=t/2;var Q=w/2;var N=PesonaBasic.getStage();var G=N.scale.x;var d=N.scale.y;var ai=an(y);O=true;n();var C;var L;function ad(aq){C="mouse";if(!aq){var aq=window.event}aq.preventDefault();aq.stopPropagation();if(aq.buttons==undefined||aq.buttons==1||aq.buttons==2){document.addEventListener("mouseup",I,false);L=aq.button;aj(aq,aq)}}var p;function X(aq){C="touch";if(!aq){var aq=window.event}aq.preventDefault();aq.stopPropagation();if(aq.targetTouches.length==1){document.addEventListener("touchend",T,false);var ar=aq.targetTouches[0];p=ar.identifier;aj(aq,ar)}}function aj(au,aq){var ar={x:aq.pageX,y:aq.pageY};var at=false;u(au,ar.x,ar.y,C,0)}var ac;function I(aq){if(!aq){var aq=window.event}aq.preventDefault();aq.stopPropagation();if(aq.button==L){ac="mouse";H(aq,aq)}}function T(aq){if(!aq){var aq=window.event}aq.preventDefault();aq.stopPropagation();ac="touch";var ar=aq.changedTouches[0];if(ar.identifier==p){H(aq,ar)}}function H(at,aq){var ar={x:aq.pageX,y:aq.pageY};aa(at,ar.x,ar.y,ac,p);document.removeEventListener("mouseup",I,false);document.removeEventListener("touchend",T,false)}this.destroy=function(){O=false;ae=null;i=null;ap=null;s=null;ag=null;if(K){y.removeEventListener("mousedown",ad);y.removeEventListener("touchstart",X)}PesonaBasic.removeCanvas(g,true);x=null;y=null};var l;this.setCallback=function(aq){l=aq};this.setId=function(aq){V=aq};this.getId=function(){return V};this.setShapeCallback=function(ar,aq){ae=ar;ap=aq;n()};this.animate=function(aq,ar,au,at){if(af){x.clearRect(0,0,t,w);if(a){if(ap!=null){if(ap.func!=null){ap.func.apply(this,[V,x,S,Q,ap.par,c,q])}}else{if(ae!=null){if(ae.func!=null){ae.func.apply(this,[V,x,S,Q,ae.par,c,q])}}}}else{if(ae!=null){if(ae.func!=null){ae.func.apply(this,[V,x,S,Q,ae.par,c,q])}}}if(i!=null){if(i.func!=null){i.func.apply(this,[V,0,0,S,Q,i.par,c,q,o]);x.lineWidth=aq;x.strokeStyle=ar;x.setLineDash(au);x.lineDashOffset=at;x.stroke();x.setLineDash([])}}}};this.redraw=function(){if(O){var aq=PesonaBasic.getStage();G=aq.scale.x;d=aq.scale.y;ai=an(y);if(r||af){n()}}};this.fix=function(aq){r=aq;n()};this.enable=function(aq){m=aq;n()};this.visible=function(aq){if(af!=aq){af=aq;y.style.visibility=(af)?"visible":"hidden";if(!af){x.clearRect(0,0,t,w)}else{n()}}};this.isVisibled=function(){return af};this.isEnabled=function(){return m};this.setPos=function(aq,ar){f=aq;e=ar;PesonaBasic.changeCanvasPos(g,aq-t/2,ar-w/2);ai=an(y);n()};this.getPos=function(){return{x:f,y:e,width:c,height:q}};this.changeShapeCallback=function(aq){ae=aq;n()};this.changeAreaCallback=function(aq){i=aq};this.changeHilightCallback=function(aq){ap=aq};this.pointDown=function(au,at,ar,av,aq){if(!a){return u(au,at,ar,av,aq)}return false};function u(av,at,ar,ax,aq){if(!r&&m&&af){var aw=at-ai.x;var au=ar-ai.y;return B(av,aw,au,ax,aq)}else{return false}}this.pointUp=function(av,at,ar,aw,aq){if(a&&Z==aq){var au=aa(av,at,ar,aw,aq);return au}return false};function aa(av,at,ar,ax,aq){if(!r&&m&&af){var aw=at-ai.x;var au=ar-ai.y;return b(av,aw,au,ax,aq)}else{return false}}function ao(){if(r){if(ag!=null){x.clearRect(0,0,t,w);if(af){if(ag.func!=null){ag.func.apply(this,[V,x,S,Q,ag.par,c,q])}}}}else{if(af){x.clearRect(0,0,t,w);if(a){if(ap!=null){if(ap.func!=null){ap.func.apply(this,[V,x,S,Q,ap.par,c,q])}}else{if(ae!=null){if(ae.func!=null){}}}}else{if(ae!=null){if(ae.func!=null){var aq=ae.func.apply(this,[V,x,S,Q,ae.par,c,q]);o=aq}}}}}}function ah(){if(af){x.clearRect(0,0,t,w);if(ap!=null){if(ap.func!=null){ap.func.apply(this,[V,x,S,Q,ap.par,c,q])}}}}function n(){if(r){ao()}else{if(m){ao()}else{a=false;x.globalAlpha=0.3;ao();x.globalAlpha=1}}}var Z;var al;var a=false;function B(aw,ax,av,ar,aq){var au=false;if(i!=null){if(i.func!=null){const at=window.devicePixelRatio||1;if(i.func.apply(this,[ax*at,av*at,V,x,S,Q,i.par,c,q,o])){aw.preventDefault();aw.stopPropagation();ah();al=ar;Z=aq;a=true;F("click",{id:V,output:ab,e:aw});au=true}}}return au}function b(aw,ax,av,ar,aq){var au=false;a=false;if(m){ao()}if(s!=null){if(s.func!=null){const at=window.devicePixelRatio||1;if(s.func.apply(this,[ax*at,av*at,V,x,S,Q,s.par,c,q,o])){F("release",{id:V,output:ab,e:aw});au=true}else{F("releaseOut",{id:V,output:ab,e:aw});au=false}}}return au}function F(ar,aq){if(l!=null){l.apply(this,[ar,aq,this])}}function an(aq){var ar=curtop=0;if(aq.offsetParent){do{ar+=aq.offsetLeft;curtop+=aq.offsetTop}while(aq=aq.offsetParent)}return{x:ar,y:curtop}}};