function Base64Image(c){var a=c;this.getImage=function(f,e){var d=new Image();d.addEventListener("load",function(g){b("created",{id:f,image:this,width:e.width,height:e.height})});if(e.img.substr(0,4)=="<svg"){d.src="data:image/svg+xml;base64,"+window.btoa(e.img)}else{d.src=e.img}};this.getCMYImage=function(i,h,g,e,d){var f=new Image();f.addEventListener("load",function(n){var r=document.createElement("canvas");r.width=this.width;r.height=this.height;var j=r.getContext("2d");j.drawImage(this,0,0);var s=j.getImageData(0,0,this.width,this.height);var p,k,q;for(var o=0;o<s.data.length;o+=4){p=(1-(s.data[o+0]/255))*g;k=(1-(s.data[o+1]/255))*e;q=(1-(s.data[o+2]/255))*d;s.data[o+0]=Math.floor((1-p)*255);s.data[o+1]=Math.floor((1-k)*255);s.data[o+2]=Math.floor((1-q)*255)}j.putImageData(s,0,0);var l=new Image();l.src=r.toDataURL();l.addEventListener("load",function(m){b("created",{id:i,image:this})})});f.src=h.img};this.getRGBImage=function(i,h,f,g,d){var e=new Image();e.addEventListener("load",function(n){var q=document.createElement("canvas");q.width=this.width;q.height=this.height;var k=q.getContext("2d");k.drawImage(this,0,0);var s=k.getImageData(0,0,this.width,this.height);var j,m,p;for(var o=0;o<s.data.length;o+=4){j=(s.data[o+0]/255)*f;m=(s.data[o+1]/255)*g;p=(s.data[o+2]/255)*d;s.data[o+0]=Math.floor((j)*255);s.data[o+1]=Math.floor((m)*255);s.data[o+2]=Math.floor((p)*255)}k.putImageData(s,0,0);var l=new Image();l.src=q.toDataURL();l.addEventListener("load",function(r){b("created",{id:i,image:this})})});e.src=h.img};function b(e,d){if(a!=null){a.apply(this,[e,d])}}};