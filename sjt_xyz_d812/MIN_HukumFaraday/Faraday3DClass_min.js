class coilCurve extends THREE.Curve{constructor(t,r,o,s,e,n,a,i){super(),this.rLoop=t,this.rCorner=r,this.turn=o,this.gap=s,this.fLength1=e,this.fLength2=n,this.wireRad=a,this.coilGap=i;var h=Math.asin((r+s/2)/(r+t));this.PIGap=h;var l,c=(t+r)*Math.sin(h),y=(t+r)*Math.cos(h),x=new Array;const z=Math.PI/2,p=3*Math.PI/2,E=2*Math.PI;if(1==o){var u=e-(y-t)-r,d=n-(y-t)-r;l=r*z,x.push({type:"arc",x:c,y:y+u,aStart:-z,aEnd:-Math.PI,r:r,l:l,n:0,t:0}),l=u,x.push({type:"line",x:c-r,y:y+u,length:u,dir:-1,l:l,n:0,t:0}),l=r*(z-h),x.push({type:"arc",x:c,y:y,aStart:Math.PI,aEnd:z+h,r:r,l:l,n:0,t:0}),l=t*(E-h-h),x.push({type:"arc",x:0,y:0,aStart:-z+h,aEnd:p-h,r:t,l:l,n:0,t:0}),l=r*(z-h),x.push({type:"arc",x:-c,y:y,aStart:z-h,aEnd:0,r:r,l:l,n:0,t:0}),l=d,x.push({type:"line",x:-c+r,y:y,length:d,dir:1,l:l,n:0,t:0}),l=r*z,x.push({type:"arc",x:-c,y:y+d,aStart:0,aEnd:-z,r:r,l:l,n:0,t:0}),this.zStart=0}else{u=e-(y-t)-3*r,d=n-(y-t)-3*r;if(l=r*z,x.push({type:"arc",x:c,y:y+2*r+u,aStart:-z,aEnd:-Math.PI,r:r,l:l,n:o/2,t:0}),l=u,x.push({type:"line",x:c-r,y:y+2*r+u,length:u,dir:-1,l:l,n:o/2,t:0}),l=r*z,x.push({type:"zarc",x:c-r,y:y+2*r,z:r,aStart:Math.PI,aEnd:z,r:r,l:l,t:0}),l=.5*o*i-2*r,x.push({type:"zline",x:c-r,y:y+r,z:r,length:l,dir:1,l:l,t:0}),l=r*z,x.push({type:"zarc",x:c-r,y:y,z:i*o/2-r,aStart:-z,aEnd:0,r:r,l:l,t:0}),l=r*(z-h),x.push({type:"arc",x:c,y:y,aStart:Math.PI,aEnd:z+h,r:r,l:l,n:0,t:0}),l=t*(E-h),x.push({type:"ARC",x:0,y:0,aStart:-z+h,aEnd:p,r:t,l:l,n:0,t:0}),o>2)for(var v=2;v<o;v++)l=t*E,x.push({type:"ARC",x:0,y:0,aStart:-z,aEnd:p,r:t,l:l,n:v-1,t:0});l=t*(E-h),x.push({type:"ARC",x:0,y:0,aStart:-z,aEnd:p-h,r:t,l:l,n:o-1,t:0}),l=r*(z-h),x.push({type:"arc",x:-c,y:y,aStart:z-h,aEnd:0,r:r,l:l,n:o,t:0}),l=r*z,x.push({type:"zarc",x:-c+r,y:y,z:-i*o/2+r,aStart:-Math.PI,aEnd:-z,r:r,l:l,t:0}),l=.5*o*i-2*r,x.push({type:"zline",x:-c+r,y:y+r,z:-i*o/2+r,length:l,dir:1,l:l,t:0}),l=r*z,x.push({type:"zarc",x:-c+r,y:y+2*r,z:-r,aStart:z,aEnd:0,r:r,l:l,t:0}),l=d,x.push({type:"line",x:-c+r,y:y+2*r,length:d,dir:1,l:l,n:o/2,t:0}),l=r*z,x.push({type:"arc",x:-c,y:y+2*r+d,aStart:0,aEnd:-z,r:r,l:l,n:o/2,t:0}),this.zStart=.5*this.turn*this.coilGap}var R=0;for(v=0;v<x.length;v++)R+=x[v].l;var S=0;for(v=0;v<x.length;v++)x[v].t=S,S+=x[v].l/R;x.push({t:1}),this.L=R,this.rec=x}getPoint(t,r=new THREE.Vector3){for(var o,s=this.rec,e=0;e<s.length-1;e++)if(t>=s[e].t&&t<=s[e+1].t){o=e;break}var n,a,i,h=s[o+1].t-s[o].t;switch(s[o].type){case"line":n=s[o].x,a=s[o].y+s[o].dir*s[o].l*(t-s[o].t)/h,i=this.zStart-s[o].n*this.coilGap;break;case"arc":var l=s[o].aStart+(s[o].aEnd-s[o].aStart)*(t-s[o].t)/h;n=s[e].x+s[o].r*Math.cos(l),a=s[e].y-s[o].r*Math.sin(l),i=this.zStart-s[o].n*this.coilGap;break;case"ARC":l=s[o].aStart+(s[o].aEnd-s[o].aStart)*(t-s[o].t)/h;n=s[e].x+s[o].r*Math.cos(l),a=s[e].y-s[o].r*Math.sin(l),i=this.zStart-s[o].n*this.coilGap-this.coilGap*(t-s[o].t)/h;break;case"zline":n=s[o].x,a=s[o].y,i=s[o].z+s[o].dir*s[o].l*(t-s[o].t)/h;break;case"zarc":l=s[o].aStart+(s[o].aEnd-s[o].aStart)*(t-s[o].t)/h;n=s[e].x,i=s[e].z+s[o].r*Math.cos(l),a=s[e].y-s[o].r*Math.sin(l)}return r.set(n,a,i)}}class cableCurve_splitRing extends THREE.Curve{constructor(t,r,o){super(),this.pos1=new THREE.Vector3,t.getWorldPosition(this.pos1),this.pos2=new THREE.Vector3,r.getWorldPosition(this.pos2),this.control=[],this.setParameter(this.pos1.add(o),this.pos2)}setParameter(t,r){this.control.length=0,this.control.push({x:t.x,y:t.z,z:t.y}),this.control.push({x:r.x-(r.x-t.x)/4,y:t.z}),this.control.push({x:r.x,y:t.z+(r.z-t.z)/4}),this.control.push({x:r.x,y:r.z,z:r.y}),this.controlV=[],this.controlV.push({x:t.z,y:t.y}),this.controlV.push({x:t.z+(r.z-t.z)/2,y:t.y}),this.controlV.push({x:t.z+(r.z-t.z)/2,y:r.y}),this.controlV.push({x:r.z,y:r.y})}getPoint(t,r=new THREE.Vector3){var o=Bezier(t,this.control),s=Bezier(t,this.controlV);return r.set(o.x,s.y,o.y)}}class cableCurve_bohlam extends THREE.Curve{constructor(t,r){super();var o=new THREE.Vector3;t.getWorldPosition(o);var s=new THREE.Vector3;r.getWorldPosition(s),this.control=[],this.control.push({x:o.x,y:o.y,z:o.z}),this.control.push({x:o.x+.05*(o.x-s.x),y:o.y+1.3*(s.y-o.y),z:o.z+.05*(o.z-s.z)}),this.control.push({x:s.x,y:s.y-(s.y-o.y)/2,z:s.z}),this.control.push({x:s.x,y:s.y,z:s.z})}getPoint(t,r=new THREE.Vector3){var o=Bezier3D(t,this.control);return r.set(o.x,o.y,o.z)}}class cableCurve_alat extends THREE.Curve{constructor(t,r,o){super();var s=new THREE.Vector3;t.getWorldPosition(s);var e=t.direction(),n=new THREE.Vector3;r.getWorldPosition(n);var a,i,h,l,c=r.direction();this.control=new Array(8),this.control[0]={x:s.x,y:s.y,z:s.z},l=3,a=e.x*l,i=e.y*l,h=e.z*l,this.control[1]={x:s.x+.9*a,y:s.y+.9*i,z:s.z+.9*h},this.control[2]={x:s.x+a,y:s.y+i,z:s.z+h},this.control[8]={x:n.x,y:n.y,z:n.z},l=6,a=c.x*l,i=c.y*l,h=c.z*l,this.control[7]={x:n.x+.9*a,y:n.y+.9*i,z:n.z+.9*h},this.control[6]={x:n.x+a,y:n.y+i,z:n.z+h};var y=new THREE.Vector3(this.control[6].x-this.control[1].x,this.control[6].y-this.control[1].y,this.control[6].z-this.control[1].z),x=y.length();y.normalize(),l=.3*x,a=y.x*l,i=y.y*l,h=y.z*l,this.control[3]={x:this.control[2].x+a,y:this.control[2].y+i,z:this.control[2].z+h},l=.2*x,a=y.x*l,i=y.y*l,h=y.z*l,this.control[4]={x:this.control[3].x+a+.4*x,y:this.control[3].y+i-o,z:this.control[3].z+h},l=.25*x,a=-y.x*l,i=-y.y*l,h=-y.z*l,this.control[5]={x:this.control[6].x+a,y:this.control[6].y+i-o,z:this.control[6].z+h}}getPoint(t,r=new THREE.Vector3){var o=Bezier3D(t,this.control);return r.set(o.x,o.y,o.z)}}class mySocket extends THREE.Group{constructor(){super();var t=new THREE.Geometry;t.vertices.push(new THREE.Vector3(0,0,0));var r=new THREE.PointsMaterial({color:16711935,size:0});this.dot=new THREE.Points(t,r),this.dot.position.set(0,1,0),this.dot.visible=!1,this.add(this.dot)}direction(){var t=new THREE.Vector3;this.getWorldPosition(t);var r=new THREE.Vector3;return this.dot.getWorldPosition(r),new THREE.Vector3(r.x-t.x,r.y-t.y,r.z-t.z).normalize()}}