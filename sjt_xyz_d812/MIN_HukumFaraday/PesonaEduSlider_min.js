function PesonaEduSlider(W,l,t,ai,U,S,a,d,al,af,ah,h,o,u,G,ao,ad){var X=W;var z=l;var A=l.parentNode;var y=l.getContext("2d");var c=a;var p=d;var x=al;var q=af;var T=U;var R=S;var aj=ah;var M=Math.min(h,o);var Z=Math.max(h,o);var aa=Math.min(Z,Math.max(M,u));var ae=G;var F=ao;var g=ad;var n=o-h;var Y="";var O="";var ac="";var E=aa;var r=true;var Q=true;var P=PesonaBasic.getStage();var I=P.scale.x;var f=P.scale.y;var an=ap(z);ak();aq();var m;this.setCallback=function(ar){m=ar};this.setLabelPrefixSuffix=function(ar,at){O=ar;ac=at};this.redraw=function(){var ar=PesonaBasic.getStage();I=ar.scale.x;f=ar.scale.y;an=ap(z);ab=null;v=null;ak();aq();if(Y!=""){N(Y)}};function aq(){s()}this.showValue=function(ar){Y=ar;N(ar)};function N(ar){}this.setValue=function(ar){E=ar;aq()};this.getValue=function(){H("change",{id:X,value:E})};this.visible=function(at){r=at;if(at){ak();aq()}else{if(v!=null){var ar=T+Math.round(c*(ab-M)/n);var au=R+Math.round(p/2);y.putImageData(v,Math.round((ar-16)*I),Math.round((au-3)*f),0,0,Math.round(40*I),Math.round(40*f))}if(F!=null){if(F.func!=null){F.func.apply(this,[X,y,T,R,c,p,aj,M,Z])}}}};this.enable=function(ar){Q=ar;ak();aq()};this.pointDown=function(av,at,ar,ax){D=ax;var aw=at-an.x;var au=ar-an.y;return C(av,aw,au,aw/I,au/f)};var K;var k;var w;function ak(){if(ae!=null){if(ae.func!=null){ae.func.apply(this,[X,y,T,R,c,p,aj,M,Z,x,q,ae.parameter])}}K=[];if(Q){K.push({x:T,y:R});K.push({x:T+c,y:R});K.push({x:T+c,y:R+p});K.push({x:T,y:R+p})}}var ab;var v;function s(){var ar,av;var au=20;if(v!=null){if(x==0){ar=T+Math.round(c*(ab-M)/n);av=R+Math.round(p/2);y.putImageData(v,Math.round((ar-16)*I),Math.round((av-3)*f),0,0,Math.round(40*I),Math.round(40*f))}else{ar=T+Math.round(c/2)+((q==0)?6:-6);av=R+p-Math.round(p*(ab-M)/n);if(q==0){y.putImageData(v,Math.round((ar-32)*I),Math.round((av-16)*f),0,0,Math.round(40*I),Math.round(40*f))}else{y.putImageData(v,Math.round((ar-3)*I),Math.round((av-16)*f),0,0,Math.round(40*I),Math.round(40*f))}}}ab=E;if(x==0){ar=T+Math.round(c*(E-M)/n);av=R+Math.round(p/2);v=y.getImageData(Math.round((ar-16)*I),Math.round((av-3)*f),Math.round(40*I),Math.round(40*f))}else{ar=T+Math.round(c/2)+((q==0)?6:-6);av=R+d-Math.round(p*(E-M)/n);if(q==0){v=y.getImageData(Math.round((ar-32)*I),Math.round((av-16)*f),Math.round(40*I),Math.round(40*f))}else{v=y.getImageData(Math.round((ar-3)*I),Math.round((av-16)*f),Math.round(40*I),Math.round(40*f))}}y.save();if(Q){y.shadowColor="black";y.shadowOffsetX=4*I;y.shadowOffsetY=2*I;y.shadowBlur=4*I}k=[];w=[];if(x==0){y.beginPath();y.moveTo(ar,av);y.lineTo(ar-12,av+au);y.lineTo(ar+12,av+au);y.closePath();y.fillStyle=(Q)?"#ffffff":"rgba(255,255,255,0.3)";y.fill();y.restore();y.strokeStyle=(Q)?"#000000":"rgba(0,0,0,0.3)";y.lineWidth=1;y.stroke();if(Q){k.push({x:ar,y:av});k.push({x:ar-12,y:av+au});k.push({x:ar+12,y:av+au});w.push({x:ar-24,y:av-au});w.push({x:ar+24,y:av-au});w.push({x:ar+24,y:av+3*au/2});w.push({x:ar-24,y:av+3*au/2})}}else{var at=(q==0)?-au:au;y.beginPath();y.moveTo(ar,av);y.lineTo(ar+at,av-12);y.lineTo(ar+at,av+12);y.closePath();y.fillStyle=(Q)?"#ffffff":"rgba(255,255,255,0.3)";y.fill();y.restore();y.strokeStyle=(Q)?"#000000":"rgba(0,0,0,0.3)";y.lineWidth=1;y.stroke();if(Q){k.push({x:ar,y:av});k.push({x:ar+at,y:av-12});k.push({x:ar+at,y:av+12});w.push({x:ar+3*at/2,y:av-24});w.push({x:ar-at,y:av-24});w.push({x:ar-at,y:av+24});w.push({x:ar+3*at/2,y:av+24})}}}function B(at,ay,aw){var au;var ar;var ax=0;for(var av=0;av<aw.length;av++){au=(av+1)%aw.length;if((aw[av].y<ay&&aw[au].y>ay)||(aw[av].y>ay&&aw[au].y<ay)){ar=aw[au].x-(aw[au].x-aw[av].x)*(aw[au].y-ay)/(aw[au].y-aw[av].y);if(ar>at){ax++}}}return(ax%2==1)}function ap(ar){var at=curtop=0;if(ar.offsetParent){do{at+=ar.offsetLeft;curtop+=ar.offsetTop}while(ar=ar.offsetParent)}return{x:at,y:curtop}}var D;function V(ar){if(!ar){var ar=window.event}ar.preventDefault();ar.stopPropagation();document.removeEventListener("touchend",V);document.removeEventListener("touchmove",ag);document.body.style.cursor="default"}function ag(ar){if(!ar){var ar=window.event}ar.preventDefault();ar.stopPropagation();var at=ar.targetTouches[0];J(ar,(at.pageX-an.x)/t,(at.pageY-an.y)/ai)}var j,i;var e=false;function C(ax,ay,aw,au,ar){ax.preventDefault();ax.stopPropagation();var av=false;if((D=="mouse")?B(au,ar,k):B(au,ar,w)){e=false;document.body.style.cursor="pointer";if(x==0){j=au-((E-M)*c/n+T)}else{i=ar-(R+d-p*(E-M)/n)}if(D=="mouse"){document.addEventListener("mouseup",L);document.addEventListener("mousemove",am)}else{document.addEventListener("touchend",V);document.addEventListener("touchmove",ag)}return true}else{var at=false;if(Q&&g!=null){if(g.func!=null){at=g.func.apply(this,[X,y,T,R,c,p,g.parameter,ay,aw])}}if(at){return false}else{if(B(au,ar,K)){if(x==0){E=M+(au-U)*n/c}else{E=M+(-ar+R+p)*n/p}aq();H("point",{id:X,value:E});return true}}}return false}function L(ar){if(!ar){var ar=window.event}ar.preventDefault();ar.stopPropagation();document.body.style.cursor="default";document.removeEventListener("mouseup",L);document.removeEventListener("mousemove",am);b(ar)}function am(ar){if(!ar){var ar=window.event}ar.preventDefault();ar.stopPropagation();J(ar,(ar.pageX-an.x)/I,(ar.pageY-an.y)/f)}function V(ar){if(!ar){var ar=window.event}ar.preventDefault();ar.stopPropagation();document.removeEventListener("touchend",V);document.removeEventListener("touchmove",ag);b(ar)}function ag(ar){if(!ar){var ar=window.event}ar.preventDefault();ar.stopPropagation();var at=ar.targetTouches[0];J(ar,(at.pageX-an.x)/I,(at.pageY-an.y)/f)}function J(au,at,ar){e=true;if(x==0){E=Math.max(M,Math.min(Z,(M+(at-T-j)*n/c)))}else{E=Math.max(M,Math.min(Z,(M+(i-ar+R+p)*n/p)))}aq();H("change",{id:X,value:E})}function b(ar){if(e){aq();H("release",{id:X,value:E});e=false}}function H(at,ar){if(m!=null){m.apply(this,[at,ar])}}};