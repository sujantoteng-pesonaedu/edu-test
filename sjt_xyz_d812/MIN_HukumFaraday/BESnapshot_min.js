function BESnapshot(b,n,l,c,o){var i=6;var m={x:n,y:l,w:c,h:o};var j=document.createElement("canvas");var h=PesonaBasic.addCanvas("BEO_Ss_view"+b,{canvas:j,index:-1,x:m.x,y:m.y,width:m.w+2*i,height:m.h+2*i,shadow:{color:"#aaaaaa",x:2,y:2,blur:5}},false);j.style.outline="none";j.style.backgroundColor="#ffffff";j.style.visibility="hidden";h.lineCap="round";h.lineJoin="round";var d=1;var a=1;const e=250*m.w/520;var g;var f=false;this.shot=function(p){g=p.rec.slice(0);d=p.BScale;a=p.EScale;k()};this.output=function(){return{rec:g,BScale:d,EScale:a}};this.redraw=function(){if(g){k()}};this.visible=function(p){f=p;j.style.visibility=(p)?"visible":"hidden"};this.isVisible=function(){return f};this.getBoundary=function(){return{x:m.x,y:m.y,width:m.w+2*i,height:m.h+2*i}};function k(){var p=h;var q=m.w;var r=m.h;p.clearMe();p.beginPath();p.rect(i,i,q,r);p.fillStyle="#003344";p.fill();p.save();p.clip();var B=g[g.length-1].t;var A=q+i;var v=r/2+i;var z,w;var u=true;p.beginPath();for(var s=g.length-1;s>=0;s--){z=A-(B-g[s].t)*e;w=v-g[s].B*50000000*d;if(u){u=false;p.moveTo(z,w)}else{p.lineTo(z,w)}}p.lineWidth=3;p.strokeStyle="rgba(255,210,0,0.5)";p.stroke();var u=true;p.beginPath();for(var s=g.length-1;s>=0;s--){z=A-(B-g[s].t)*e;w=v-g[s].E*3000000*a;if(u){u=false;p.moveTo(z,w)}else{p.lineTo(z,w)}}p.lineWidth=2;p.strokeStyle="rgba(40,215,240,0.6)";p.stroke();p.beginPath();p.moveTo(0,v);p.lineTo(A,v);p.lineWidth=1;p.strokeStyle="rgba(255,255,255,0.3)";p.stroke();p.restore()}};