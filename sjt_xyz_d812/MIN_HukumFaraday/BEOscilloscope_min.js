function BEOscilloscope(h,g,q,m,i){var k={x:h,y:g,w:q,h:m};var d=document.createElement("canvas");var r=PesonaBasic.addCanvas("BEO_view",{canvas:d,index:-1,x:k.x,y:k.y,width:k.w,height:k.h,borderRadius:5,shadow:{color:"#000000",x:0,y:0,blur:5}},false);var o=document.createElement("canvas");var l=PesonaBasic.addCanvas("BEO_label",{canvas:o,index:-1,x:k.x,y:k.y+k.h+5,width:k.w,height:35},false);d.style.outline="none";d.style.backgroundColor="#003344";d.style.visibility="hidden";o.style.visibility="hidden";r.lineCap="round";r.lineJoin="round";var p=1;var a=1;const n=250*k.w/520;const c=200;var f=new Array();var e=true;j();this.redraw=function(){j()};this.input=function(u,w,v){b(u,w,v);if(e){s(u)}};this.output=function(){return{rec:f,BScale:p,EScale:a}};this.visible=function(t){e=t;d.style.visibility=(t)?"visible":"hidden";o.style.visibility=(t)?"visible":"hidden"};this.isVisible=function(){return e};function b(u,w,v){if(f.length>=c){f.shift()}f.push({t:u,B:w,E:v})}function j(){var u=l;u.clearMe();var t=5;var v=16;u.lineWidth=2;u.beginPath();u.moveTo(t,v);u.lineTo(t+25,v);u.strokeStyle="rgb(255,210,0)";u.stroke();PesonaTextBlock.print(u,t+32,v,i.flux,20,"left","middle",false,"serif","#444444",0);t=78;u.beginPath();u.moveTo(t,v);u.lineTo(t+25,v);u.strokeStyle="rgb(40,215,240)";u.stroke();PesonaTextBlock.print(u,t+32,v,i.emf,20,"left","middle",false,"serif","#444444",0)}function s(F){var u=r;var v=k.w;var w=k.h;u.clearMe();var E=v;var B=w/2;var D,C;var A=true;u.beginPath();for(var z=f.length-1;z>=0;z--){D=E-(F-f[z].t)*n;C=B-f[z].B*50000000*p;if(A){A=false;u.moveTo(D,C)}else{u.lineTo(D,C)}}u.lineWidth=3;u.strokeStyle="rgba(255,210,0,0.5)";u.stroke();var A=true;u.beginPath();for(var z=f.length-1;z>=0;z--){D=E-(F-f[z].t)*n;C=B-f[z].E*3000000*a;if(A){A=false;u.moveTo(D,C)}else{u.lineTo(D,C)}}u.lineWidth=2;u.strokeStyle="rgba(40,215,240,0.6)";u.stroke();u.beginPath();u.moveTo(0,B);u.lineTo(E,B);u.lineWidth=1;u.strokeStyle="rgba(255,255,255,0.3)";u.stroke()}};